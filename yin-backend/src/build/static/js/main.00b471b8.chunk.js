(this.webpackJsonpyin=this.webpackJsonpyin||[]).push([[0],{34:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/Yin_Classroom_logo@4x.f472b60e.png"},40:function(e,t,a){e.exports=a.p+"static/media/Student@4x.52823a73.png"},41:function(e,t,a){e.exports=a.p+"static/media/Teacher@4x.d165e725.png"},42:function(e,t,a){e.exports=a.p+"static/media/1_graph.4059374e.svg"},43:function(e,t,a){e.exports=a.p+"static/media/2_graph.ec56be3d.svg"},44:function(e,t,a){e.exports=a.p+"static/media/3_graph.d05b49b1.svg"},45:function(e,t,a){e.exports=a.p+"static/media/4_graph.70af4f87.svg"},55:function(e,t,a){e.exports=a(72)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(36),i=a.n(r),o=a(2),c=a.n(o),l=a(3),u=a(4),h=a(6),d=a(5),m=a(1),p=a(7),b=(a(61),a(62),a(63),a(34),function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"baseline-explanation"},s.a.createElement("p",null,"Since pitch is relative to a speaker's voice, we need to know what your natural voice sounds like so that we can calibrate the curve accoridngly. "))}}]),t}(n.Component)),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={record:[],button_class:""},a.addRecordFunction=a.addRecordFunction.bind(Object(m.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){document.getElementById("__record_button").classList.remove("green")}},{key:"addRecordFunction",value:function(){var e=this;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:this.record("__record_button").then((function(t){e.processAudio(t).then((function(t){var a,n,s,r;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=t.search(/(\*\*\*)/)+5,n=t.search("&&&"),s="https://yin.rit.edu/"+(s=t.substring(a,n)),i.next=6,c.a.awrap(e.getDataSet(s));case 6:r=i.sent,e.props.outputFunction(r);case 8:case"end":return i.stop()}}))}))}));case 1:case"end":return t.stop()}}),null,this)}},{key:"getDataSet",value:function(e){var t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=c.a,a.next=3,c.a.awrap(fetch("".concat(e)));case 3:return a.t1=a.sent.text(),a.next=6,a.t0.awrap.call(a.t0,a.t1);case 6:return t=a.sent,a.abrupt("return",t);case 8:case"end":return a.stop()}}))}},{key:"record",value:function(e){var t=this;return new Promise((function(e){var a;navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){var s=new MediaRecorder(n);s.start(),t.setState({button_class:"red"});var r=[];s.addEventListener("dataavailable",(function(e){r.push(e.data)})),s.addEventListener("stop",(function(){a=new Blob(r,{type:"audio/wav; codecs=MS_PCM"}),e(a)})),setTimeout((function(){s.stop(),t.setState({button_class:"green"})}),2e3)}))}))}},{key:"processAudio",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var a=new FormData;a.append("audioData",e),fetch("https://yin.rit.edu/pages/audioProcessing.php",{method:"POST",body:a}).then((function(e){return t(e.text())}))})));case 1:case"end":return t.stop()}}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{onClick:this.addRecordFunction,className:this.state.button_class,id:"__record_button"},this.props.label))}}]),t}(n.Component),f=a(15),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).setBaseline=a.setBaseline.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"setBaseline",value:function(e){var t=this.extractAverage(e);this.props.outputFunction(t)}},{key:"extractAverage",value:function(e){var t=f.c(e).map((function(e){return Number(e.frequency)}));return t.reduce((function(e,t){return e+t}),0)/t.length}},{key:"render",value:function(){return s.a.createElement("div",{id:"activity-3-baseline"},s.a.createElement("h3",null,"Record Baseline"),s.a.createElement("p",null,"The following activity is designed to help you improve your ability to produce tone by mimicking a native speaker. You'll be given an audio recording of a native speaker saying a word, and asked to record yourself saying the word. You'll be shown the pitch curve of the native speaker, and after you finish your recording, your pitch curve will be placed along side it for your to compare."),s.a.createElement("p",null,'To begin, please press the "Record Baseline" button and say aloud, "This is my normal speaking voice."'),s.a.createElement(v,{id:"baseline",label:"Baseline",outputFunction:this.setBaseline}),s.a.createElement("p",null,s.a.createElement("a",{href:"/explanation"},"Why are we asking you to do this?")))}}]),t}(n.Component),y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",null,s.a.createElement("div",{className:"footer"},s.a.createElement("p",null,"\xa9 Leo Holman and Christine McCullough"),s.a.createElement("p",null,"Have any problems, comments, or suggestions? ",s.a.createElement("br",null),"Contact us at: ",s.a.createElement("a",{href:"mailto:yinwebapp@gmail.com"},"yinwebapp@gmail.com"))))}}]),t}(n.Component),E=a(8),O=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("nav",null,s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("a",{href:"https://yin.rit.edu"},"Return to Yin ")),s.a.createElement("li",null,s.a.createElement(E.b,{to:"/lessons/"},"Lessons & Quizzes \u2003|")),s.a.createElement(s.a.Fragment,null,this.props.isLoggedIn?s.a.createElement("li",null,s.a.createElement("span",null,"Logged in as: ",this.props.username,"\u2003|")):s.a.createElement("li",null,s.a.createElement(E.b,{to:"/login/"},"Login \u2003|")," "))))}}]),t}(n.Component),w=a(39),j=a.n(w),k=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"header"},s.a.createElement(E.b,{to:"/"},s.a.createElement("img",{src:j.a,id:"logo",alt:"jojo the monkey walking by the yin logo"})),s.a.createElement(O,{is_teacher:this.props.is_teacher,isLoggedIn:this.props.isLoggedIn,username:this.props.username}))}}]),t}(n.Component),S=(a(69),a(40)),C=a.n(S),x=a(41),_=a.n(x),z=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"main",className:"classroom"},s.a.createElement("h2",null,"Welcome to Yin Classroom!"),s.a.createElement("p",{id:"summary"},"Yin Classroom is a companion to Yin to facilitate using Yin's tools and activities in the classroom. Teachers can create lessons to correspond with classroom curriculum, upload audio for vocabulary lists, and add quizzes to test their students. Students can practice the words they'll actually need to know for class, and take quizzes at their convenience."),s.a.createElement("section",{className:"intro"},s.a.createElement("img",{alt:"student pointing at a laptop",src:C.a}),s.a.createElement("img",{alt:"Teacher teaching students at a whiteboard",src:_.a}),s.a.createElement("div",{id:"students"},s.a.createElement("h3",null,"STUDENTS"),s.a.createElement("p",null,"In Yin Classroom, you can test yourself with activities based on lessons you're learning in the classroom. Practice as much as you want in any of the lessons, and when you're ready, take any quizzes that your teacher has created for you. It's recommended you first explore ",s.a.createElement("a",{href:"www.yin.rit.edu"},"Yin")," to become familiar with how the activities work, and then come here to practice words your teacher has specifically added based on what you're learning in class. "),s.a.createElement(E.b,{to:"/login"},s.a.createElement("button",null,"Login"))),s.a.createElement("div",{id:"teachers"},s.a.createElement("h3",null,"TEACHERS"),s.a.createElement("p",null,"Want to use Yin in your classs? With Yin Classroom, you can create lessons based on word lists you're teaching, add your own audio recordings, and create quizzes to test your students' comprehension. Please ",s.a.createElement("a",{href:"mailto:yinwebapp@gmail.com"},"email us "),"to sign up as a teacher or hear more about what Yin Classroom can offer your students!"),s.a.createElement(E.b,{to:"/login"},s.a.createElement("button",null,"Login")))),s.a.createElement("div",{id:"background"})))}}]),t}(n.Component),F=a(12),D=(a(70),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={fusername:"",fpassword:"",error:""},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.handleForm=a.handleForm.bind(Object(m.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("username"),t=document.getElementById("password");e&&(""!==e.value&&this.setState({fusername:e.value}),""!==t.value&&this.setState({fpassword:t.value}))}},{key:"handleChange",value:function(e,t){this.setState(Object(F.a)({},t,e.target.value))}},{key:"handleForm",value:function(e,t,a){e.preventDefault(),""!==t&&""!==a?(this.props.submitForm(e,t,a),this.setState({fusername:"",fpassword:""}),this.setState({error:""})):""!==t&&""!==a||this.setState({error:"Please fill out all fields."})}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{id:"loginform",onSubmit:function(t){return e.handleForm(t,e.state.fusername,e.state.fpassword)}},s.a.createElement("h3",null,"Login"),s.a.createElement("label",{htmlFor:"username"},"Username:"),s.a.createElement("input",{id:"username",name:"username",placeholder:"username",type:"text",value:this.state.fusername,onChange:function(t){return e.handleChange(t,"fusername")}}),s.a.createElement("label",{htmlFor:"password"},"Password:"),s.a.createElement("input",{id:"password",name:"password",placeholder:"password",type:"password",value:this.state.fpassword,onChange:function(t){return e.handleChange(t,"fpassword")}}),s.a.createElement("input",{type:"submit",value:"Submit"}),s.a.createElement("p",null,this.props.error," ",this.state.error)))}}]),t}(n.Component)),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={activityOpen:!1},a.toggleActivityList=a.toggleActivityList.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"toggleActivityList",value:function(){this.setState({activityOpen:!this.state.activityOpen}),console.log("anything")}},{key:"render",value:function(){return s.a.createElement("div",{className:"lessonCard"},this.props.is_quiz?s.a.createElement(E.b,{to:"".concat(this.props.link,"quiz"),style:{textDecoration:"none"}},s.a.createElement("div",{className:"meta quiz",onClick:this.toggleActivityList},s.a.createElement("h2",null,s.a.createElement("span",{id:"no-underline"},"Quiz: ",this.props.LessonName)),s.a.createElement("p",null,this.props.LessonDesc))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"meta",onClick:this.toggleActivityList},s.a.createElement("h2",null,this.props.is_quiz?"Quiz: ":"Lesson: ",this.props.LessonName),s.a.createElement("p",null,this.props.LessonDesc)),s.a.createElement("div",{className:"sub activityListContainer ".concat(this.state.activityOpen?"":"hide"," ")},s.a.createElement("h2",null,"Activities"),s.a.createElement("ul",{className:"activityList"},s.a.createElement("li",null,s.a.createElement(E.b,{to:"".concat(this.props.link,"1")},"1",s.a.createElement("br",null)),s.a.createElement("span",null,"Distinguishing")),s.a.createElement("li",null,s.a.createElement(E.b,{to:"".concat(this.props.link,"2")},"2",s.a.createElement("br",null)),s.a.createElement("span",null,"Identifying")),s.a.createElement("li",null,s.a.createElement(E.b,{to:"".concat(this.props.link,"3")},"3",s.a.createElement("br",null)),s.a.createElement("span",null,"Mimicking")),s.a.createElement("li",null,s.a.createElement(E.b,{to:"".concat(this.props.link,"4")},"4",s.a.createElement("br",null)),s.a.createElement("span",null,"Producing"))))))}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={allLessons:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("/api/lessons/all").then((function(t){return t.json().then((function(t){e.setState({allLessons:t})}))}));case 1:case"end":return t.stop()}}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("ul",null,this.state.allLessons.map((function(e){return s.a.createElement(L,{LessonName:e.name,LessonDesc:e.description,is_quiz:e.is_quiz,link:"/lessons/".concat(e.name,"/"),key:"".concat(e._id)})}))))}}]),t}(n.Component),q=a(42),A=a.n(q),I=a(43),N=a.n(I),P=a(44),M=a.n(P),B=a(45),R=a.n(B),W=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"chooseImage",value:function(e){switch(e){case 1:return A.a;case 2:return N.a;case 3:return M.a;case 4:return R.a;default:return"Something went wrong"}}},{key:"componentDidMount",value:function(){var e=this;document.querySelectorAll("div.response").forEach((function(t){t.addEventListener("click",(function(a){a.stopPropagation(),e.props.collectResponse(t)}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.props.number&&s.a.createElement("div",{className:"response options".concat(this.props.number.length),id:this.props.number,key:this.props.number},this.props.number.map((function(t,a){var n="div_".concat(e.props.number,"_tone_").concat(t,"_index_").concat(a);return s.a.createElement("div",{id:n,key:n,className:"inner-response",style:{backgroundImage:"url(".concat(e.chooseImage(t),")")}},s.a.createElement("span",{className:"background-image",role:"img","aria-label":t}))}))))}}]),t}(n.Component),Y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"feedback-box",className:"feedbackBox ".concat(this.props.status)},s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,this.props.heading),s.a.createElement("p",null,this.props.content)))}}]),t}(n.Component);function U(e,t){for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}var Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={currentStimulus:0,options:[],active:[],submitted:!1,answers:[],score:0,status:"",error:"",feedback_heading:"",feedback:""},a.handleClick=a.handleClick.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.collectResponse=a.collectResponse.bind(Object(m.a)(a)),a.nextQuestion=a.nextQuestion.bind(Object(m.a)(a)),a.reset=a.reset.bind(Object(m.a)(a)),a.chooseTones=a.chooseTones.bind(Object(m.a)(a)),a.randomize=a.randomize.bind(Object(m.a)(a)),a.displayAnswers=a.displayAnswers.bind(Object(m.a)(a)),a.reportScore=a.reportScore.bind(Object(m.a)(a)),a.selectRandomOption=a.selectRandomOption.bind(Object(m.a)(a)),a.getWrongOption=a.getWrongOption.bind(Object(m.a)(a)),a.selectOptions=a.selectOptions.bind(Object(m.a)(a)),a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.stimuli.length>this.state.currentStimulus&&this.displayAnswers()}},{key:"componentDidUpdate",value:function(){this.props.stimuli.length>this.state.currentStimulus&&this.displayAnswers()}},{key:"reset",value:function(){document.getElementById("nextQuestion").classList.add("hide"),document.getElementById("submitAnswer").classList.remove("hide"),document.getElementById("feedback-box").style.visibility="hidden";for(var e=document.getElementsByClassName("response"),t=0;t<e.length;t++)e[t].classList.remove("active"),e[t].classList.remove("postive"),e[t].classList.remove("negative");this.setState({submitted:!1}),this.setState({options:[]}),this.setState({active:""})}},{key:"handleClick",value:function(){this.setState({currentStimulus:this.state.currentStimulus+1}),this.reset()}},{key:"handleSubmit",value:function(e){if(void 0!==this.state.active&&0!==this.state.active.length){this.setState({submitted:!0});for(var t=document.getElementsByClassName("response"),a=0;a<t.length;a++)t[a].classList.remove("active");U(this.state.active,this.props.stimuli[this.state.currentStimulus].correctTone)?(document.getElementById(this.state.active).classList.add("positive"),this.setState({score:this.state.score+1}),this.setState({status:"positive"}),this.setState({feedback_heading:"Correct!"}),this.setState({feedback:"You selected tone ".concat(this.state.active,", which is the correct answer.")})):(document.getElementById(this.state.active).classList.add("negative"),this.setState({status:"negative"}),this.setState({feedback_heading:"Incorrect."}),this.setState({feedback:"You selected tone ".concat(this.state.active,", when it should've been tone ").concat(this.props.stimuli[this.state.currentStimulus].correctTone,".")})),document.getElementById("nextQuestion").classList.remove("hide"),document.getElementById("submitAnswer").classList.add("hide"),document.getElementById("feedback-box").style.visibility="visible",this.setState({error:""})}else this.setState({error:"Please select an option."})}},{key:"collectResponse",value:function(e){if(!1===this.state.submitted){var t="question".concat(this.state.currentStimulus);this.setState({answers:[t,e.id]}),this.setState({active:e.id.split(",").map((function(e){return Number(e)}))});for(var a=document.getElementsByClassName("response"),n=0;n<a.length;n++)a[n].classList.remove("active");e.classList.add("active")}}},{key:"randomize",value:function(e){var t,a,n;for(n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}},{key:"selectRandomOption",value:function(e,t){var a=[],n=this.randomize([1,2,3,4]);if(1===e.length)n[0]===e[0]?a.push(n[1]):a.push(n[0]);else for(var s=0;s<e.length;s++)s===t?a.push(e[s]):n[s]===e[s]?s===e.length-1?a.push(n[0]):a.push(n[s+1]):a.push(n[s]);return a}},{key:"getWrongOption",value:function(e,t,a){var n=this.selectRandomOption(e,t);return function(e,t){for(var a=0;a<e.length;a++)if(U(e[a],t))return!0;return!1}(a,n)?this.getWrongOption(e,t,a):n}},{key:"selectOptions",value:function(){var e=this.props.stimuli[this.state.currentStimulus].correctTone,t=[];t.push(e);for(var a=this.props.choices-1,n=0,s=0;s<a;s++){var r=this.getWrongOption(e,n,t);t.push(r),++n===e.length&&(n=0)}if(void 0===this.state.options||this.state.options.length<1){var i=this.randomize(t);this.setState({options:i})}}},{key:"chooseTones",value:function(e){var t=[],a=[1,2,3,4];if("2"===this.props.choices){a=this.randomize(a);for(var n=0;n<a.length;n++)a[n]===e&&(t.push(a[n]),a.splice(n,1));t.push(a[0])}else t=a;(void 0===this.state.options||this.state.options.length<1)&&this.setState({options:t})}},{key:"displayAnswers",value:function(){(void 0===this.state.options||this.state.options.length<1)&&this.selectOptions()}},{key:"reportScore",value:function(){this.props.reportScore(this.state.score,this.props.stimuli.length,this.props.choices)}},{key:"nextQuestion",value:function(){this.refs.audio.pause(),this.refs.audio.load(),this.handleClick()}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.props.stimuli&&s.a.createElement(s.a.Fragment,null,this.props.stimuli.length>this.state.currentStimulus?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"activity-wrap two-choice"},s.a.createElement("div",{className:"stimuli"},s.a.createElement("audio",{controls:!0,id:"audio-clip",ref:"audio"},s.a.createElement("source",{id:"audioSource",src:"/".concat(this.props.stimuli[this.state.currentStimulus].audioFile),type:"audio/mpeg"}),"Audio not working!")),s.a.createElement("div",{className:"answers"},this.state.options.map((function(t){return s.a.createElement(W,{number:t,key:t,collectResponse:e.collectResponse})})))),s.a.createElement("div",{className:"feedbackContainer"},s.a.createElement("button",{onClick:this.handleSubmit,id:"submitAnswer"},"Submit"),s.a.createElement("button",{onClick:this.nextQuestion,className:"hide",id:"nextQuestion"},"Next"),s.a.createElement(Y,{status:this.state.status,heading:this.state.feedback_heading,content:this.state.feedback}),s.a.createElement("p",{id:"error"},this.state.error))):s.a.createElement(s.a.Fragment,null,"true"===this.props.quiz?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"You've completed this section of the quiz."),s.a.createElement("button",{onClick:this.reportScore},"Continue")):s.a.createElement("div",{id:"score"},s.a.createElement("h2",null,"Activity complete!"),s.a.createElement("p",null,"Your score is: ",this.state.score," out of ",this.props.stimuli.length),s.a.createElement(E.b,{to:"../"},"Return to Lessons & Quizzes"),"2"===this.props.choices?s.a.createElement(E.b,{to:"./2"},s.a.createElement("button",null,"Next activity")):s.a.createElement(E.b,{to:"./3"},s.a.createElement("button",null,"Next activity"))))))}}]),t}(n.Component),J=a(23),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a.drawPitchChart=a.drawPitchChart.bind(Object(m.a)(a)),a.drawPitchCurve=a.drawPitchCurve.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"drawPitchChart",value:function(e,t,a){f.a("#".concat(e)).append("svg").attr("width",t).attr("height",a).style("background","#eeeeee").style("border","3px solid #9A2D04");var n,s=2;for(n=0;n<5;n++)f.a("#".concat(e," svg")).append("line").attr("x1",0).attr("y1",s).attr("x2",t).attr("y2",s).style("stroke","#babbbc").style("stroke-width","3px"),3===n&&(s-=4),s+=a/4}},{key:"drawPitchCurve",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=(n.baseline,n.standardDeviation,n.color),r=void 0===s?"red":s,i=n.chartID,o=void 0===i?"__visualization":i,c=[],l=f.c(e);l.map((function(e){var n={time:e.time,frequency:e.frequency};c.push(n);var s=e.time*(t/2),i=a-(a/2+(e.frequency-a/2));return f.a("#".concat(o," svg")).append("circle").attr("cx",s).attr("cy",i).attr("r",5).classed("userPitch",!0).style("fill",r)}))}},{key:"componentDidMount",value:function(){var e=this;this.drawPitchChart("__visualization",1100,500),this.props.dataset.map((function(t){return e.drawPitchCurve(t[0],1100,500,{color:t[1]})}))}},{key:"componentDidUpdate",value:function(){var e=this;console.log("PitchChartUpdate"),f.b("svg").remove(),this.drawPitchChart("__visualization",1100,500),this.props.dataset.map((function(t){return e.drawPitchCurve(t[0],1100,500,{color:t[1]})}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{id:"__visualization"}))}}]),t}(n.Component),K=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e){e.audioFile!==this.props.audioFile&&document.getElementById("audioPlayer").load()}},{key:"render",value:function(){return s.a.createElement("audio",{className:"stimuliAudio",id:"audioPlayer",controls:!0},s.a.createElement("source",{src:this.props.audioFile}),"The audio cannot play.")}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={record:[],userDataset:"",currentStimuli:0,allowAdvance:!1},a.passDataToState=a.passDataToState.bind(Object(m.a)(a)),a.nextWord=a.nextWord.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"uploadRecording",value:function(e,t){var a,n,s;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.a,t.next=3,c.a.awrap(fetch("/api/recordings/add/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e})}));case 3:return t.t1=t.sent.json(),t.next=6,t.t0.awrap.call(t.t0,t.t1);case 6:a=t.sent,console.dir(a),n=a.recording,s=[].concat(Object(J.a)(this.state.record),[n]),this.setState({record:s});case 11:case"end":return t.stop()}}),null,this)}},{key:"passDataToState",value:function(e){this.setState({userDataset:e,allowAdvance:!0})}},{key:"nextWord",value:function(){this.state.allowAdvance?(this.setState({currentStimuli:this.state.currentStimuli+1,userDataset:"",allowAdvance:!1}),this.props.lesson.is_quiz&&(this.uploadRecording(this.state.userDataset),this.props.recordingOutput("activity3",this.state.record))):console.log("Please complete the recording first!")}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.props.lesson&&this.props.lesson.words&&this.props.lesson.words[this.state.currentStimuli]?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"stimuliCharacter"},this.props.lesson.words[this.state.currentStimuli].character),s.a.createElement(K,{audioFile:"/".concat(this.props.lesson.words[this.state.currentStimuli].audioFile)}),this.props.lesson.words[this.state.currentStimuli].native_recording&&s.a.createElement(H,{dataset:[[String(this.props.lesson.words[this.state.currentStimuli].native_recording.data),"blue"],[String(this.state.userDataset),"red"]]}),s.a.createElement(v,{label:"Record",outputFunction:this.passDataToState,key:Math.random()}),s.a.createElement("button",{onClick:this.nextWord},"Next ",this.props.lesson.words.length-1===this.state.currentStimuli?"Section":"Word")):s.a.createElement(s.a.Fragment,null,"true"===this.props.quiz?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"You've completed this section of the quiz."),s.a.createElement("button",{onClick:this.props.advance(3)},"Continue")):s.a.createElement("div",{id:"score"},s.a.createElement("h2",null,"Activity complete!"),s.a.createElement(E.b,{to:"../"},"Return to Lessons & Quizzes"),s.a.createElement(E.b,{to:"./4"},s.a.createElement("button",null,"Next activity")))))}}]),t}(n.Component),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={record:[],userDataset:"",currentStimuli:0,allowAdvance:!1},a.passDataToState=a.passDataToState.bind(Object(m.a)(a)),a.nextWord=a.nextWord.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"uploadRecording",value:function(e,t){var a,n,s;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.a,t.next=3,c.a.awrap(fetch("/api/recordings/add/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataset:e})}));case 3:return t.t1=t.sent.json(),t.next=6,t.t0.awrap.call(t.t0,t.t1);case 6:a=t.sent,console.dir(a),n=a.recording,s=[].concat(Object(J.a)(this.state.record),[n]),this.setState({record:s});case 11:case"end":return t.stop()}}),null,this)}},{key:"passDataToState",value:function(e){this.setState({userDataset:e,allowAdvance:!0}),this.props.lesson.is_quiz&&this.uploadRecording(e,this.props.username)}},{key:"nextWord",value:function(){this.state.allowAdvance?(this.setState({currentStimuli:this.state.currentStimuli+1,userDataset:"",allowAdvance:!1}),this.props.lesson.is_quiz&&(this.uploadRecording(this.state.userDataset),this.props.recordingOutput("activity4",this.state.record))):console.log("Please complete the recording first!")}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.props.lesson&&this.props.lesson.words[this.state.currentStimuli]?s.a.createElement(s.a.Fragment,null,this.props.lesson.words[this.state.currentStimuli]&&s.a.createElement("p",{className:"stimuliCharacter"},this.props.lesson.words[this.state.currentStimuli].character),this.state.allowAdvance?s.a.createElement(K,{audioFile:"/".concat(this.props.lesson.words[this.state.currentStimuli].audioFile)}):s.a.createElement(s.a.Fragment,null),s.a.createElement(H,{dataset:this.state.allowAdvance?[[String(this.props.lesson.words[this.state.currentStimuli].native_recording.data),"blue"],[String(this.state.userDataset),"red"]]:[[String(this.state.userDataset),"red"]]}),s.a.createElement(v,{label:"Record",outputFunction:this.passDataToState}),s.a.createElement("button",{onClick:this.nextWord},"Next ",this.props.lesson.words.length-1===this.state.currentStimuli?"Section":"Word")):s.a.createElement(s.a.Fragment,null,"true"===this.props.quiz?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"You've completed this section of the quiz."),s.a.createElement("button",{onClick:this.props.advance(4)},"Continue")):s.a.createElement("div",{id:"score"},s.a.createElement("h2",null,"Activity complete!"),s.a.createElement(E.b,{to:"../"},"Return to Lessons & Quizzes"))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(l.a)(this,t),a=Object(h.a)(this,Object(d.a)(t).call(this,e)),console.log(e),a.state={activity1:{score:null,maxpoints:0},activity2:{score:null,maxpoints:0},activity3:{recordings:[]},activity4:{recordings:[]},current:null,prev:!1,sum_score:0,sum_total_score:0},a.captureScore=a.captureScore.bind(Object(m.a)(a)),a.advance=a.advance.bind(Object(m.a)(a)),a.recordScore=a.recordScore.bind(Object(m.a)(a)),a.initialize=a.initialize.bind(Object(m.a)(a)),a.addActivityRecording=a.addActivityRecording.bind(Object(m.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){var n;return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.activities&&null===this.state.current&&this.setState({current:this.props.activities[0]}),!1!==t.prev){e.next=12;break}return console.log("prev state is false"),e.next=5,c.a.awrap(fetch("/api/quizScores/me/".concat(this.props.lesson.name)));case 5:return n=e.sent,e.next=8,c.a.awrap(n.json());case 8:return e.sent.length>0&&(this.setState({prev:!0}),console.log("state set")),console.log("Intialization completed"),e.abrupt("return",s.a.createElement(s.a.Fragment,null));case 12:case"end":return e.stop()}}),null,this)}},{key:"initialize",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.activities&&null===this.state.current&&this.setState({current:this.props.activities[0]}),t.next=3,c.a.awrap(fetch("/api/quizScores/me/".concat(this.props.lesson)));case 3:return e=t.sent,t.next=6,c.a.awrap(e.json());case 6:return t.sent.length>0&&(this.setState({prev:!0}),console.log("state set")),console.log("Intialization completed"),t.abrupt("return",s.a.createElement(s.a.Fragment,null));case 10:case"end":return t.stop()}}),null,this)}},{key:"addActivityRecording",value:function(e,t){this.setState(Object(F.a)({},e,{recordings:t}))}},{key:"recordScore",value:function(){var e,t,a,n;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:e=null,t=null,this.includes(1)&&this.includes(2)?(e=this.state.activity1.score+this.state.activity2.score,t=this.state.activity1.max_score+this.state.activity2.max_score):this.includes(1)?(e=this.state.activity1.score,t=this.state.activity1.max_score):this.includes(2)&&(e=this.state.activity2.score,t=this.state.activity2.max_score),this.setState({sum_score:e}),this.setState({sum_total_score:t}),a=this.state.activity3.recordings,n=a.concat(this.state.activity4.recordings),this.props.sendScore(e,t,n);case 8:case"end":return s.stop()}}),null,this)}},{key:"advance",value:function(e){for(var t=e;t<5;t++){var a=t+1;if(this.includes(a)){this.setState({current:a});break}5===a&&(this.setState({current:5}),this.recordScore())}}},{key:"captureScore",value:function(e,t,a){var n=this,s="2"===a?"activity1":"activity2",r="2"===a?1:2;this.setState(Object(F.a)({},s,{score:e,max_score:t}),(function(){n.advance(r)}))}},{key:"includes",value:function(e){for(var t=0;t<this.props.activities.length;t++)if(this.props.activities[t]===e)return!0;return!1}},{key:"toPercent",value:function(e,t){return e/t*100}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,!0===this.state.prev&&5!==this.state.current?s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"You've already taken this quiz."),s.a.createElement("p",null,"You cannot take a quiz you've already taken. For more practice, explore the lessons. For re-takes, please speak with your teacher.")):s.a.createElement(s.a.Fragment,null,this.props.activities&&this.includes(1)&&1===this.state.current?s.a.createElement(Q,{stimuli:this.props.stimuli,choices:"2",reportScore:this.captureScore,quiz:"true"}):"",this.props.activities&&this.includes(2)&&2===this.state.current?s.a.createElement(Q,{stimuli:this.props.stimuli,choices:"4",reportScore:this.captureScore,quiz:"true"}):"",this.props.activities&&this.includes(3)&&3===this.state.current?s.a.createElement($,{lesson:this.props.lesson,username:this.props.username,recordingOutput:this.addActivityRecording,advance:this.advance,quiz:"true"}):"",this.props.activities&&this.includes(4)&&4===this.state.current?s.a.createElement(G,{lesson:this.props.lesson,username:this.props.username,recordingOutput:this.addActivityRecording,advance:this.advance,quiz:"true"}):"",this.props.activities&&5===this.state.current?s.a.createElement("div",{id:"score"},s.a.createElement("h3",null,"You've completed this quiz!"),s.a.createElement("p",null,"Your combined score on the multiple choice sections is ",s.a.createElement("br",null),this.state.sum_score," out of ",this.state.sum_total_score," (",this.toPercent(this.state.sum_score,this.state.sum_total_score),"%). ",s.a.createElement("br",null),"Your teacher will grade your recordings.")):""))}}]),t}(n.Component),X=a(14),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={lesson:{},audioRes:[],audios:[],audioParse:[],userScores:[]},a.sendScore=a.sendScore.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=c.a,t.next=4,c.a.awrap(fetch("/api/lessons/".concat(this.props.match.params.name)));case 4:return t.t1=t.sent.json(),t.next=7,t.t0.awrap.call(t.t0,t.t1);case 7:e=t.sent,this.setState({lesson:e}),t.next=14;break;case 11:t.prev=11,t.t2=t.catch(0),console.log(t.t2);case 14:case"end":return t.stop()}}),null,this,[[0,11]])}},{key:"sendScore",value:function(e,t,a){fetch("/api/quizScores/add/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lesson:this.props.match.params.name,user:this.props.user,score:e,maxScore:t,recordings:a||""})})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.lesson.words&&s.a.createElement("div",null,s.a.createElement("h3",null,"Lesson: ",this.props.match.params.name),s.a.createElement("h2",null,"Activity ",this.props.match.params.activityNumber),s.a.createElement(X.b,{path:"/lessons/".concat(this.props.match.params.name,"/1")},s.a.createElement(Q,{stimuli:this.state.lesson.words,choices:"2"})),s.a.createElement(X.b,{path:"/lessons/".concat(this.props.match.params.name,"/2")},s.a.createElement(Q,{stimuli:this.state.lesson.words,choices:"4"})),s.a.createElement(X.b,{path:"/lessons/".concat(this.props.match.params.name,"/3")},!1===Boolean(this.props.baseline)?s.a.createElement(g,{outputFunction:this.props.setBaseline}):s.a.createElement($,{lesson:this.state.lesson})),s.a.createElement(X.b,{path:"/lessons/".concat(this.props.match.params.name,"/4")},!1===Boolean(this.props.baseline)?s.a.createElement(g,{outputFunction:this.props.setBaseline}):s.a.createElement(G,{lesson:this.state.lesson})),s.a.createElement(X.b,{path:"/lessons/".concat(this.props.match.params.name,"/quiz")},s.a.createElement(V,{activities:this.state.lesson.quizSections,stimuli:this.state.lesson.words,lesson:this.state.lesson,username:this.props.user,sendScore:this.sendScore}))))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={word:"",alternateTones:[],correct:"",lessonName:""},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.createAlternateToneArray=a.createAlternateToneArray.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(F.a)({},n,a))}},{key:"createAlternateToneArray",value:function(){var e=document.getElementById("altTone1").value,t=document.getElementById("altTone2").value,a=document.getElementById("altTone3").value;this.setState({alternateTones:[e,t,a]})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("word",this.state.word),t.append("alternateTones",this.state.alternateTones),t.append("correct",this.state.correct),t.append("lessonName",this.state.lessonName),t.append("audioFile",document.getElementById("audioFileInput").files[0]),fetch("/api/uploadAudio/",{method:"POST",body:t}).then((function(e){console.log(e)}))}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{onSubmit:this.handleSubmit,className:"audioForm"},s.a.createElement("label",{for:"audioFileInput"},"Audio File:"),s.a.createElement("input",{id:"audioFileInput",type:"file",name:"audioFile"}),s.a.createElement("label",{for:"word"},"Word:"),s.a.createElement("input",{id:"word",type:"text",name:"word",value:this.state.word,onChange:this.handleInputChange}),s.a.createElement("label",{for:"tone"},"Correct Tone:"),s.a.createElement("input",{id:"tone",type:"text",name:"correct",value:this.state.correct,onChange:this.handleInputChange}),s.a.createElement("label",{for:"altTone1"},"Alternate Tone 1:"),s.a.createElement("input",{id:"altTone1",type:"text",name:"altTone1",value:this.state.alternateTones[0],onChange:this.createAlternateToneArray}),s.a.createElement("label",{for:"altTone2"},"Alternate Tone 2:"),s.a.createElement("input",{id:"altTone2",type:"text",name:"altTone2",value:this.state.alternateTones[1],onChange:this.createAlternateToneArray}),s.a.createElement("label",{for:"altTone3"},"Alternate Tone 3:"),s.a.createElement("input",{id:"altTone3",type:"text",name:"altTone3",value:this.state.alternateTones[2],onChange:this.createAlternateToneArray}),s.a.createElement("label",{for:"lesson"},"Lesson Name:"),s.a.createElement("input",{id:"lesson",type:"text",name:"lessonName",value:this.state.lessonName,onChange:this.handleInputChange}),s.a.createElement("label",{id:"submitButton"},s.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={name:e.name||"",description:e.description||"",words:e.words||[],wordKeys:[],is_quiz:e.is_quiz||!1,quiz_sections:e.quiz_sections||[1,2,3,4],all_words:[],form_complete:!1},console.log(e),a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.handleCheckboxChange=a.handleCheckboxChange.bind(Object(m.a)(a)),a.fetchAllWords=a.fetchAllWords.bind(Object(m.a)(a)),a.handleSelectChange=a.handleSelectChange.bind(Object(m.a)(a)),a.matchWord=a.matchWord.bind(Object(m.a)(a)),a.componentDidUpdate=a.componentDidUpdate.bind(Object(m.a)(a)),a.deleteLesson=a.deleteLesson.bind(Object(m.a)(a)),a.is_checked=a.is_checked.bind(Object(m.a)(a)),a.handleSectionChange=a.handleSectionChange.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.awrap(this.fetchAllWords());case 2:e=t.sent,this.setState({all_words:e});case 4:case"end":return t.stop()}}),null,this)}},{key:"fetchAllWords",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.a,t.next=3,c.a.awrap(fetch("/api/words/all/"));case 3:return t.t1=t.sent.json(),t.next=6,t.t0.awrap.call(t.t0,t.t1);case 6:return e=t.sent,t.abrupt("return",e);case 8:case"end":return t.stop()}}))}},{key:"handleInputChange",value:function(e){var t=e.target.name,a=e.target.value;this.setState(Object(F.a)({},t,a))}},{key:"handleCheckboxChange",value:function(){var e=this.state.is_quiz;this.setState({is_quiz:!e})}},{key:"handleSectionChange",value:function(e){console.log(this.state.quiz_sections);var t=this.state.quiz_sections,a=null;this.is_checked(e)?(a=t.indexOf(e),t.splice(a,1)):t.push(e),this.setState({quiz_sections:t})}},{key:"handleSelectChange",value:function(e){for(var t=e.target.options,a=[],n=[],s=0;s<t.length;s++)t[s].selected&&(a.push(t[s].value),n.push(t[s].id));this.setState({words:a}),this.setState({wordKeys:n})}},{key:"deleteLesson",value:function(){var e="/api/lessons/".concat(this.props.name,"/delete");fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.state.name})}).then((function(){console.log("deleted")}))}},{key:"handleSubmit",value:function(e){var t=this;console.log("in handle"),e.preventDefault();var a=this.props.editing?"PUT":"POST",n="/api/lessons/add/";this.props.editing&&this.state.name===this.props.name?n="/api/lessons/".concat(this.state.name,"/edit"):this.props.editing&&this.state.name!==this.props.name&&(this.deleteLesson(),a="POST"),console.log(n),fetch(n,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.state.name,description:this.state.description,words:this.state.wordKeys,is_quiz:this.state.is_quiz,quizSections:this.state.quiz_sections})}).then((function(){console.log("success"),t.setState({form_complete:!0})}))}},{key:"componentDidUpdate",value:function(e){if(e.words!==this.props.words){var t=this.props.words.map((function(e){return e.character}));this.setState({words:t})}}},{key:"matchWord",value:function(e){for(var t=0;t<this.state.words.length;t++)return this.state.words[t]._id===e?(console.log(!0),!0):(console.log(!1),!1)}},{key:"is_checked",value:function(e){if(this.props.quiz_sections||this.state.quiz_sections)for(var t=0;t<this.state.quiz_sections.length;t++)if(this.state.quiz_sections[t]===e)return!0;return!1}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.form_complete?s.a.createElement(X.a,{to:"/teacherInterface/"}):s.a.createElement(s.a.Fragment,null,this.props.editing?s.a.createElement("h1",null,"Editing ",this.props.name):s.a.createElement("h1",null,"New lesson"),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",{htmlFor:"name"},"Name:"),s.a.createElement("input",{id:"name",type:"text",name:"name",value:this.state.name,onChange:this.handleInputChange}),s.a.createElement("label",{htmlFor:"description"},"Description:"),s.a.createElement("input",{id:"description",type:"text",name:"description",value:this.state.description,onChange:this.handleInputChange}),s.a.createElement("label",{htmlFor:"words"},"Words"),s.a.createElement("select",{id:"words",multiple:!0,name:"words",value:this.state.words,onChange:this.handleSelectChange,size:"7"},this.state.all_words&&this.state.all_words.map((function(e){return s.a.createElement("option",{key:e._id,id:e._id,value:e.character},e.character)}))),s.a.createElement("label",{htmlFor:"is_quiz"},"Is this lesson a quiz?:"),s.a.createElement("input",{id:"is_quiz",checked:!!this.state.is_quiz,type:"checkbox",name:"is_quiz",value:this.state.is_quiz,onChange:this.handleCheckboxChange}),this.state.is_quiz?s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Which activities would you like in this quiz?"),s.a.createElement("label",{htmlFor:"sec_one"},"Activity 1: Distinguishing (2-choice quiz)"),s.a.createElement("input",{id:"sec_one",checked:this.is_checked(1),type:"checkbox",name:"sec_one",value:"1",onClick:function(){return e.handleSectionChange(1)}}),s.a.createElement("label",{htmlFor:"sec_two"},"Activity 2: Identifying (4-choice quiz)"),s.a.createElement("input",{id:"sec_two",checked:this.is_checked(2),type:"checkbox",name:"sec_two",value:"2",onChange:function(){return e.handleSectionChange(2)}}),s.a.createElement("label",{htmlFor:"sec_three"},"Activity 3: Mimicking (record with teacher example)"),s.a.createElement("input",{id:"sec_three",checked:this.is_checked(3),type:"checkbox",name:"sec_three",value:"3",onChange:function(){return e.handleSectionChange(3)}}),s.a.createElement("label",{htmlFor:"sec_four"},"Activity 4: Producing (record without teacher example)"),s.a.createElement("input",{id:"sec_four",checked:this.is_checked(4),type:"checkbox",name:"sec_four",value:"4",onChange:function(){return e.handleSectionChange(4)}})):s.a.createElement(s.a.Fragment,null),s.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={lesson:{},words:[]},a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e,t;return c.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=c.a,a.next=3,c.a.awrap(fetch("/api/lessons/".concat(this.props.match.params.name,"/")));case 3:return a.t1=a.sent.json(),a.next=6,a.t0.awrap.call(a.t0,a.t1);case 6:return e=a.sent,this.setState({lesson:e}),a.t2=c.a,a.next=11,c.a.awrap(fetch("/api/lessons/".concat(this.props.match.params.name,"/words/")));case 11:return a.t3=a.sent.json(),a.next=14,a.t2.awrap.call(a.t2,a.t3);case 14:t=a.sent,this.setState({words:t});case 16:case"end":return a.stop()}}),null,this)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.lesson.name&&s.a.createElement(te,{name:this.state.lesson.name,description:this.state.lesson.description,words:this.state.words,is_quiz:this.state.lesson.is_quiz,editing:!0,quiz_sections:this.state.lesson.quizSections}))}}]),t}(n.Component),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={deleted:!1,response:""},a.delete=a.delete.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"delete",value:function(){var e=this;fetch("/api/lessons/".concat(this.props.match.params.name,"/delete"),{method:"DELETE"}).then((function(t){return t.text().then((function(t){console.log("deleted"),e.setState({response:t}),e.setState({deleted:!0})}))}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"lesson delete"},this.state.deleted?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,this.state.response),s.a.createElement(E.b,{to:"../../"},"Back to lessons")):s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Are you sure you want to delete ",this.props.match.params.name,"?"),s.a.createElement("button",{onClick:this.delete},"Delete")))}}]),t}(n.Component),se=(a(71),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={lessons:[]},a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.a,t.next=3,c.a.awrap(fetch("/api/lessons/all/"));case 3:return t.t1=t.sent.json(),t.next=6,t.t0.awrap.call(t.t0,t.t1);case 6:e=t.sent,this.setState({lessons:e});case 8:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,this.state.lessons&&s.a.createElement(s.a.Fragment,null,s.a.createElement(E.b,{to:"/teacherInterface/lessons/add",id:"addLessonLink"},"+ \u2003Add a Lesson"),s.a.createElement("h1",null,"Lessons:"),s.a.createElement("ul",null,this.state.lessons.map((function(t){return s.a.createElement(E.b,{to:"/teacherInterface/lessons/".concat(t.name,"/"),key:t.name,props:t,className:"teacherCardLink"},s.a.createElement("div",{className:"teacherCard lessonCard"},s.a.createElement("div",{className:"meta",onClick:e.toggleActivityList},s.a.createElement("h2",null,t.is_quiz?"Quiz: ":"Lesson: ",t.name),s.a.createElement("p",null,t.description),s.a.createElement(E.b,{to:"/teacherInterface/lessons/".concat(t.name,"/edit/"),key:t.name,className:"teacherEditLink"},"Edit Lesson"),s.a.createElement(E.b,{to:"/teacherInterface/lessons/".concat(t.name,"/delete/"),key:"delete".concat(t.name),className:"teacherDeleteLink"},"Delete Lesson"))))})))))}}]),t}(n.Component)),re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={lesson:{}},a.componentDidMount=a.componentDidMount.bind(Object(m.a)(a)),a.fetchLesson=a.fetchLesson.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){return c.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.lesson&&this.fetchLesson();case 1:case"end":return e.stop()}}),null,this)}},{key:"fetchLesson",value:function(){var e;return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=c.a,t.next=3,c.a.awrap(fetch("/api/lessons/".concat(this.props.match.params.name)));case 3:return t.t1=t.sent.json(),t.next=6,t.t0.awrap.call(t.t0,t.t1);case 6:e=t.sent,this.setState({lesson:e});case 8:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){return s.a.createElement("div",{className:"lesson show"},s.a.createElement(E.b,{to:"/teacherInterface/lessons/".concat(this.state.lesson.name,"/edit/"),key:this.state.lesson.name,className:"teacherEditLink"},"Edit Lesson"),s.a.createElement("h2",null,this.state.lesson.name),s.a.createElement("h3",null,"Description:"),s.a.createElement("p",null,this.state.lesson.description),this.state.lesson.words&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",null,"Words:"),s.a.createElement("ul",null,this.state.lesson.words.map((function(e){return s.a.createElement("li",{key:e._id},e.character)})))),this.state.lesson.is_quiz?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{id:"is_quiz"},"This lesson is a quiz, containing the following activities:"),s.a.createElement("ul",null,this.state.lesson.quizSections.map((function(e){return s.a.createElement("li",{key:e},e)})))):s.a.createElement("p",null,"This is a lesson, not a quiz."))}}]),t}(n.Component),ie=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return s.a.createElement(X.d,null,s.a.createElement(X.b,{path:"/teacherInterface/lessons/:name/edit/",component:ae}),s.a.createElement(X.b,{path:"/teacherInterface/lessons/:name/delete/",component:ne}),s.a.createElement(X.b,{path:"/teacherInterface/lessons/add/",component:te}),s.a.createElement(X.b,{path:"/teacherInterface/lessons/:name/",component:re}),s.a.createElement(X.b,{path:"/teacherInterface/lessons/",component:se}),s.a.createElement(X.b,{path:"/teacherInterface/words/add",component:ee}),s.a.createElement(X.b,{path:"/teacherInterface/",component:se}))}}]),t}(n.Component),oe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={username:"",password:"",password2:"",baseline:null,is_teacher:!1,form_complete:!1,preventSubmit:!1,errorMessage:""},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.handleCheckboxChange=a.handleCheckboxChange.bind(Object(m.a)(a)),a.handlePasswordChange=a.handlePasswordChange.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handlePasswordChange",value:function(){this.state.password!==this.state.password2?(console.log("error"),this.setState({errorMessage:"Your passwords do not match."}),this.setState({preventSubmit:!0})):this.state.password===this.state.password2&&(console.log("match"),this.setState({errorMessage:""}),this.setState({preventSubmit:!1}))}},{key:"handleInputChange",value:function(e){var t,a,n=this;return c.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:t=e.target.name,a=e.target.value,this.setState(Object(F.a)({},t,a),(function(){"password"!==t&&"password2"!==t||n.handlePasswordChange()}));case 3:case"end":return s.stop()}}),null,this)}},{key:"handleCheckboxChange",value:function(){var e=this.state.is_teacher;this.setState({is_teacher:!e})}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!1===this.state.preventSubmit){var a=this.props.editing?"PUT":"POST";fetch("/api/signup/",{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password,baseline:this.state.baseline,is_teacher:this.state.is_teacher})}).then((function(e){var a;return c.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.awrap(e.text());case 2:"Username taken, please try another."===(a=n.sent)?t.setState({errorMessage:a}):t.setState({form_complete:!0});case 4:case"end":return n.stop()}}))}))}else!0===this.state.preventSubmit&&this.setState({errorMessage:this.state.errorMessage+"  Please correct errors before submitting."})}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,this.state.form_complete?s.a.createElement(X.a,{to:"/"}):s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{id:"signUp",onSubmit:this.handleSubmit},s.a.createElement("h2",null,"Sign Up"),s.a.createElement("label",{htmlFor:"username"},"Username:"),s.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:this.handleInputChange}),s.a.createElement("label",{htmlFor:"password"},"Password:"),s.a.createElement("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),s.a.createElement("label",{htmlFor:"password2"},"Re-enter password:"),s.a.createElement("input",{id:"password2",type:"password",name:"password2",value:this.state.password2,onChange:this.handleInputChange}),s.a.createElement("p",{id:"error"},this.state.errorMessage),s.a.createElement("input",{type:"submit",value:"Submit"}),s.a.createElement("p",null,"If you are a teacher, please ",s.a.createElement("a",{href:"mailto:yinwebapp@gmail.com"},"contact us")," for special permissions."))))}}]),t}(n.Component),ce=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={lessonOpen:!0,isLoggedIn:!1,username:"",baseline:0,is_teacher:!1,error:""},e.toggleLessonActivity=e.toggleLessonActivity.bind(Object(m.a)(e)),e.submitForm=e.submitForm.bind(Object(m.a)(e)),e.setBaseline=e.setBaseline.bind(Object(m.a)(e)),e.checkLogin=e.checkLogin.bind(Object(m.a)(e)),e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.checkLogin()}},{key:"toggleLessonActivity",value:function(){this.setState({lessonOpen:!this.state.lessonOpen})}},{key:"setBaseline",value:function(e){return c.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({baseline:e}),t.next=3,c.a.awrap(fetch("/api/user/baseline/add/",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({baseline:e})}));case 3:case"end":return t.stop()}}),null,this)}},{key:"checkLogin",value:function(){var e,t,a,n,s,r;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c.a.awrap(fetch("/api/user/me/"));case 2:if(401!==(e=i.sent).status&&404!==e.status){i.next=7;break}return i.abrupt("return",!1);case 7:return t=!0,i.next=10,c.a.awrap(e.json());case 10:a=i.sent,n=a.is_teacher,s=a.username,r=Number(a.baseline),this.setState({username:s,isLoggedIn:t,baseline:r,is_teacher:n});case 15:case"end":return i.stop()}}),null,this)}},{key:"submitForm",value:function(e,t,a){var n=this;e.preventDefault(),fetch("/api/login/",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:t,password:a})}).then((function(e){401===e.status?n.setState({error:"Username or password is incorrect."}):e.text().then((function(e){n.setState({error:""}),n.setState({isLoggedIn:!0}),n.setState({username:t})}))}))}},{key:"render",value:function(){var e=this;return s.a.createElement(E.a,null,s.a.createElement(k,{is_teacher:this.state.is_teacher,isLoggedIn:this.state.isLoggedIn,username:this.state.username}),this.state.isLoggedIn?s.a.createElement(s.a.Fragment,null,s.a.createElement(X.d,null,s.a.createElement(X.b,{path:"/baseline/",component:g}),s.a.createElement(X.b,{path:"/teacherInterface/",component:ie}),s.a.createElement(X.b,{path:"/lessons/:name/:activityNumber",render:function(t){return s.a.createElement(Z,Object.assign({baseline:e.state.baseline},t,{setBaseline:e.setBaseline,user:e.state.username}))}}),s.a.createElement(X.b,{path:"/lessons/",component:T}),s.a.createElement(X.b,{path:"/",component:z}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(X.d,null,s.a.createElement(X.b,{exact:!0,path:"/",component:z}),s.a.createElement(X.b,{exact:!0,path:"/SignUp"},s.a.createElement(oe,null)),s.a.createElement(X.b,{exact:!0,path:"*/explanation"},s.a.createElement(b,null)),s.a.createElement(X.b,{exact:!0,path:"/*"},s.a.createElement(D,{submitForm:this.submitForm,error:this.state.error})))),s.a.createElement(y,null))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[55,1,2]]]);
//# sourceMappingURL=main.00b471b8.chunk.js.map