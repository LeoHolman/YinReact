{"version":3,"sources":["assets/images/Yin_Classroom_logo@4x.png","assets/images/Student@4x.png","assets/images/Teacher@4x.png","assets/images/1_graph.svg","assets/images/2_graph.svg","assets/images/3_graph.svg","assets/images/4_graph.svg","components/BaselineExplanation.js","components/Recorder.js","components/Baseline.js","components/Footer.js","components/Nav.js","components/Header.js","pages/Home.js","components/Login.js","components/LessonDirectoryCard.js","pages/LessonDirectory.js","components/Answer.js","components/FeedbackBox.js","components/ChoiceQuiz.js","components/PitchChart.js","components/AudioPlayer.js","components/Mimicking.js","components/Production.js","components/Quiz.js","pages/Activity.js","components/AudioUpload.js","components/lessons/LessonForm.js","components/lessons/LessonEdit.js","components/lessons/LessonDelete.js","components/lessons/TeacherLessonDirectory.js","components/lessons/LessonShow.js","pages/TeacherInterface.js","pages/SignUp.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","BaselineExplanation","id","Component","Recorder","props","state","record","button_class","addRecordFunction","bind","componentDidMount","document","getElementById","classList","remove","this","then","blob","processAudio","csvDataLocation","a","async","start","search","end","url","substring","getDataSet","data","outputFunction","fetch","text","buttonId","Promise","resolve","audioBlob","navigator","mediaDevices","getUserMedia","audio","stream","mediaRecorder","MediaRecorder","setState","audioChunks","addEventListener","event","push","Blob","type","setTimeout","stop","formData","FormData","append","method","body","res","onClick","className","label","Baseline","setBaseline","dataset","baseline","extractAverage","d3","map","__data","Number","frequency","reduce","acc","number","length","href","Footer","Nav","to","is_teacher","Header","src","Logo","alt","Home","student","teacher","Login","fusername","fpassword","error","handleChange","handleForm","console","log","user","pass","value","target","username","password","preventDefault","submitForm","onSubmit","e","htmlFor","name","placeholder","onChange","LessonDirectoryCard","activityOpen","toggleActivityList","is_quiz","link","style","textDecoration","LessonName","LessonDesc","LessonDirectory","allLessons","response","json","result","lesson","description","key","_id","Answer","One","Two","Three","Four","collectResponse","backgroundImage","chooseImage","role","aria-label","FeedbackBox","status","heading","content","ChoiceQuiz","currentStimulus","options","active","submitted","answers","score","feedback_heading","feedback","handleClick","handleSubmit","nextQuestion","reset","chooseTones","randomize","displayAnswers","reportScore","add","visibility","responses","getElementsByClassName","x","JSON","stringify","stimuli","correctTone","questionLabel","j","i","Math","floor","random","correct","optionArr","randomArr","choices","splice","undefined","opt","refs","pause","load","controls","ref","audioFile","character","quiz","PitchChart","drawPitchChart","drawPitchCurve","divID","width","height","attr","y","standardDeviation","color","chartID","datarecord","parsedData","point","time","classed","curve","AudioPlayer","Mimicking","userDataset","currentStimuli","allowAdvance","passDataToState","nextWord","headers","dir","recordingID","recording","updatedRecord","uploadRecording","recordingOutput","words","native_recording","String","advance","Production","Quiz","activity1","maxpoints","activity2","activity3","recordings","activity4","current","prev","sum_score","sum_total_score","captureScore","recordScore","initialize","addActivityRecording","componentDidUpdate","prevProps","prevState","snapshot","activities","activityNumber","includes","max_score","array1","allRecordings","concat","sendScore","num","next","activity","activitynum","num1","num2","toPercent","Activity","audioRes","audios","audioParse","userScores","match","params","sum_total","path","Boolean","quizSections","AudioUpload","word","alternateTones","lessonName","handleInputChange","createAlternateToneArray","checked","altTone1","altTone2","altTone3","files","for","LessonForm","wordKeys","quiz_sections","all_words","form_complete","handleCheckboxChange","fetchAllWords","handleSelectChange","matchWord","deleteLesson","is_checked","handleSectionChange","attribute","array","index","indexOf","selected","selected_keys","editing","newWords","multiple","size","LessonEdit","LessonDelete","deleted","delete","TeacherLessonDirectory","lessons","LessonShow","fetchLesson","TeacherInterface","component","SignUp","password2","preventSubmit","errorMessage","handlePasswordChange","message","App","isLoggedIn","toggleLessonActivity","checkLogin","lessonOpen","credentials","session","userdata","token","render","exact","React","window","location","hostname","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3247d5e6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Yin_Classroom_logo@4x.f472b60e.png\";","module.exports = __webpack_public_path__ + \"static/media/Student@4x.52823a73.png\";","module.exports = __webpack_public_path__ + \"static/media/Teacher@4x.d165e725.png\";","module.exports = __webpack_public_path__ + \"static/media/1_graph.4059374e.svg\";","module.exports = __webpack_public_path__ + \"static/media/2_graph.ec56be3d.svg\";","module.exports = __webpack_public_path__ + \"static/media/3_graph.d05b49b1.svg\";","module.exports = __webpack_public_path__ + \"static/media/4_graph.70af4f87.svg\";","import React, {Component} from 'react';\r\n\r\n\r\nclass BaselineExplanation extends Component{\r\n    render(){\r\n        return(\r\n            <div id =\"baseline-explanation\">\r\n                <p>Since pitch is relative to a speaker's voice, we need to know what your natural voice sounds like so that we can calibrate the curve accoridngly. </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BaselineExplanation;","import React, { Component } from 'react';\r\n\r\nclass Recorder extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            record: [],\r\n            button_class: ''\r\n        }\r\n        this.addRecordFunction = this.addRecordFunction.bind(this);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        const recordButton = document.getElementById(\"__record_button\");\r\n        recordButton.classList.remove('green');\r\n    }\r\n\r\n    async addRecordFunction() {\r\n        // self.innerHTML = \"Recording\";\r\n        this.record(\"__record_button\")\r\n            .then( blob => {\r\n                // self.innerHTML = \"Done\"\r\n                this.processAudio(blob)\r\n                    .then( async (csvDataLocation) => {\r\n                        const start = csvDataLocation.search(/(\\*\\*\\*)/)+5\r\n                        const end = csvDataLocation.search('&&&')\r\n                        var url = csvDataLocation.substring(start,end)\r\n                        url = 'https://yin.rit.edu/' + url;\r\n                        // this.drawPitchCurve(url, 1100,500);\r\n                        const data = await this.getDataSet(url);\r\n                        this.props.outputFunction(data);\r\n                    })\t\r\n            })\r\n    }\r\n\r\n    async getDataSet(url){\r\n        const data = await (await fetch(`${url}`)).text();\r\n        return data;\r\n    }\r\n\r\n    record(buttonId) {\r\n        return new Promise(resolve => {\r\n            // var audio;\r\n            // var audioUrl;\r\n            var audioBlob;\r\n            const recordButton = document.getElementById(buttonId);\r\n            navigator.mediaDevices.getUserMedia({\r\n                    audio: true\r\n                })\r\n                .then(stream => {\r\n                    const mediaRecorder = new MediaRecorder(stream);\r\n                    mediaRecorder.start();\r\n                    // recordButton.classList.remove(\"green\");\r\n                    // recordButton.classList.add(\"red\");\r\n                    this.setState({button_class:'red'});\r\n    \r\n                    const audioChunks = [];\r\n    \r\n                    mediaRecorder.addEventListener(\"dataavailable\", event => {\r\n                        audioChunks.push(event.data);\r\n                    });\r\n    \r\n                    mediaRecorder.addEventListener(\"stop\", () => {\r\n                        audioBlob = new Blob(audioChunks, {\r\n                            type: 'audio/wav; codecs=MS_PCM'\r\n                        });\r\n                        resolve(audioBlob);\r\n                    });\r\n    \r\n                    setTimeout(() => {\r\n                        mediaRecorder.stop();\r\n                        // recordButton.classList.remove(\"red\");\r\n                        // recordButton.classList.add(\"green\");\r\n                        this.setState({button_class:'green'});\r\n                    }, 2000);\r\n                });\r\n        })\r\n    };\r\n\r\n    async processAudio(audioBlob) {\r\n        return new Promise(resolve => {\r\n            // var rawResponse;\r\n            // var csvDataLocation;\r\n            var formData = new FormData();\r\n            formData.append(\"audioData\", audioBlob);\r\n            fetch('https://yin.rit.edu/pages/audioProcessing.php', {\r\n                method: 'POST', \r\n                body: formData,\r\n            }).then((res) => resolve(res.text()));\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                <button onClick={this.addRecordFunction} className={this.state.button_class} id=\"__record_button\">{this.props.label}</button>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Recorder;","import React, {Component} from 'react';\r\nimport Recorder from './Recorder';\r\nimport * as d3 from 'd3';\r\n\r\n\r\nclass Baseline extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.setBaseline = this.setBaseline.bind(this);\r\n    }\r\n\r\n    setBaseline(dataset){\r\n        const baseline = this.extractAverage(dataset);\r\n        this.props.outputFunction(baseline);\r\n    }\r\n\r\n    extractAverage(dataset){\r\n        const parsedData = d3.tsvParse(dataset);\r\n        const data = parsedData.map( (__data) => {\r\n            return Number(__data.frequency); \r\n        });\r\n\r\n        const baseline = data.reduce((acc, number) => acc + number, 0) / data.length;\r\n        return baseline;\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div id =\"activity-3-baseline\">\r\n                <h3>Record Baseline</h3>\r\n                <p>The following activity is designed to help you improve your ability to produce tone by mimicking a native speaker. You'll be given an audio recording of a native speaker saying a word, and asked to record yourself saying the word. You'll be shown the pitch curve of the native speaker, and after you finish your recording, your pitch curve will be placed along side it for your to compare.</p>\r\n                <p>To begin, please press the \"Record Baseline\" button and say aloud, \"This is my normal speaking voice.\"</p>\r\n                <Recorder id=\"baseline\" label=\"Baseline\" outputFunction={this.setBaseline} />\r\n                <p>\r\n                    <a href=\"/explanation\">Why are we asking you to do this?</a>\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Baseline;","import React, {Component} from 'react';\r\n\r\nclass Footer extends Component{\r\n    render(){\r\n        return(\r\n            <footer>\r\n                <div className = \"footer\">\r\n                    <p>© Leo Holman and Christine McCullough</p>\r\n                    <p>Have any problems, comments, or suggestions? <br/>Contact us at: <a href=\"mailto:yinwebapp@gmail.com\">yinwebapp@gmail.com</a></p>\r\n                </div>\r\n            </footer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Footer;","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass Nav extends Component {\r\n    render(){\r\n        return(\r\n            <nav>\r\n                <ul>\r\n                    <li><a href=\"https://yin.rit.edu\">Return to Yin </a></li>\r\n                    <li><Link to=\"/lessons/\">Lessons & Quizzes &emsp;|</Link></li>\r\n                    <li><Link to=\"/login/\">Login &emsp;|</Link> </li>\r\n                    {this.props.is_teacher &&\r\n                        <li><Link to=\"/teacherInterface/\">Teachers &emsp;|</Link></li>}\r\n                </ul>\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Nav;","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport Nav from './Nav.js';\r\nimport Logo from '../assets/images/Yin_Classroom_logo@4x.png';\r\n\r\nclass Header extends Component{\r\n    render(){\r\n        return(\r\n            <div className=\"header\">\r\n                <Link to=\"/\"><img src={Logo} id=\"logo\" alt=\"jojo the monkey walking by the yin logo\"/></Link>\r\n                <Nav is_teacher={this.props.is_teacher} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nexport default Header;","import React, {Component} from 'react';\r\nimport '../css/Home.css'\r\n// import yin1 from '../assets/images/yin1.svg'\r\n// import yin2 from '../assets/images/yin2.svg'\r\n// import yin3 from '../assets/images/yin3.svg'\r\nimport student from '../assets/images/Student@4x.png';\r\nimport teacher from '../assets/images/Teacher@4x.png';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass Home extends Component {\r\n    render(){\r\n        return (\r\n            <>\r\n                <div id = \"main\" className =\"classroom\">\r\n                   <h2>Welcome to Yin Classroom!</h2>\r\n                   <p id=\"summary\">Yin Classroom is a companion to Yin to facilitate using Yin's tools and activities in the classroom.\r\n                        Teachers can create lessons to correspond with classroom curriculum, upload audio for vocabulary lists, and add quizzes to test their students.\r\n                       Students can practice the words they'll actually need to know for class, and take quizzes at their convenience.\r\n                   </p>\r\n                   <section className=\"intro\">\r\n                        <img alt=\"student pointing at a laptop\" src={student}/>\r\n                        <img alt=\"Teacher teaching students at a whiteboard\" src={teacher}/>\r\n                        <div id=\"students\">\r\n                            <h3>STUDENTS</h3>\r\n                            <p>In Yin Classroom, you can test yourself with activities based on lessons you're learning in the classroom. \r\n                                Practice as much as you want in any of the lessons, and when you're ready, take any quizzes that your teacher\r\n                                has created for you. It's recommended you first explore <a href=\"www.yin.rit.edu\">Yin</a> to become familiar with\r\n                                how the activities work, and then come here to practice words your teacher has specifically added based on what you're \r\n                                learning in class. </p>\r\n                            <Link to=\"/login\"><button>Login or Sign Up</button></Link>\r\n                        </div>\r\n                        <div id=\"teachers\">\r\n                            <h3>TEACHERS</h3>\r\n                            <p>Want to use Yin in your classs? With Yin Classroom, you can create lessons based on word lists you're teaching, add your\r\n                                own audio recordings, and create quizzes to test your students' comprehension. Please <a href=\"mailto:yinwebapp@gmail.com\">email us </a>\r\n                                to sign up as a teacher or hear more about what Yin Classroom can offer your students!\r\n                            </p>\r\n                            <Link to=\"/login\"><button>Login or Sign Up</button></Link>\r\n                        </div>\r\n                   </section>\r\n                   <div id=\"background\">\r\n                    </div>     \r\n                </div>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home;","import React, { Component } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport '../css/login.css';\r\n\r\nclass Login extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            fusername: '',\r\n            fpassword: '',\r\n            error:\"\"\r\n        };\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleForm = this.handleForm.bind(this);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        console.log('mounted');\r\n        var user = document.getElementById(\"username\");\r\n        var pass = document.getElementById(\"password\");\r\n        if(user){\r\n            console.log(\"user exists\");\r\n            console.log(user.value + \" user \");\r\n            if (user.value !==\"\"){\r\n                console.log('userset');\r\n                this.setState({fusername:user.value});\r\n            } \r\n            if(pass.value !==\"\"){\r\n                console.log('passset');\r\n\r\n                this.setState({fpassword:pass.value});\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    handleChange(event, target) {\r\n        this.setState({[target]: event.target.value});\r\n    }\r\n\r\n    handleForm(event, username, password){\r\n        event.preventDefault();\r\n        if(username !== \"\" && password !==\"\"){\r\n            this.props.submitForm(event, username, password);\r\n            this.setState( {fusername: '', fpassword: ''});\r\n            this.setState({error:\"\"});\r\n        }else if (username===\"\" || password ===\"\"){\r\n            this.setState({'error':'Please fill out all fields.'});\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                <form id=\"loginform\"  onSubmit={e => this.handleForm(e, this.state.fusername, this.state.fpassword )}>\r\n                    <h3>Login</h3>\r\n                    <label htmlFor=\"username\">Username:</label>\r\n                    <input id=\"username\" name=\"username\" placeholder=\"username\" type=\"text\" value ={this.state.fusername} onChange={e => this.handleChange(e,'fusername')} />\r\n                    <label htmlFor =\"password\">Password:</label>\r\n                    <input id=\"password\" name=\"password\" placeholder=\"password\" type=\"password\"  value={this.state.fpassword} onChange={e => this.handleChange(e,'fpassword')}/>\r\n                    <input type=\"submit\" value=\"Submit\" />\r\n                    <p>{this.props.error} {this.state.error}</p>\r\n\r\n                </form>\r\n                <Link to=\"/SignUp\">Don't have an account? Sign up.</Link>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport {\r\n    Link\r\n  } from \"react-router-dom\";\r\n\r\nclass LessonDirectoryCard extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            activityOpen: false\r\n        }\r\n        this.toggleActivityList = this.toggleActivityList.bind(this);\r\n    }\r\n\r\n    toggleActivityList(){\r\n        this.setState({activityOpen: !this.state.activityOpen});\r\n        console.log(\"anything\")\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"lessonCard\">\r\n                {this.props.is_quiz ?\r\n                    <Link to={`${this.props.link}quiz`} style={{ textDecoration: 'none' }}>\r\n                        <div className=\"meta quiz\" onClick={this.toggleActivityList} >\r\n                            <h2><span id=\"no-underline\">Quiz: {this.props.LessonName}</span></h2>\r\n                            <p>{this.props.LessonDesc}</p>\r\n                        </div>\r\n                    </Link>\r\n                :\r\n                    <>\r\n                        <div className=\"meta\" onClick={this.toggleActivityList} >\r\n                            <h2>{this.props.is_quiz ? 'Quiz: ' : 'Lesson: '}{this.props.LessonName}</h2>\r\n                            <p>{this.props.LessonDesc}</p>\r\n                        </div>\r\n                        <div className = {`sub activityListContainer ${this.state.activityOpen ? '' : 'hide'} `}>\r\n                            <h2>Activities</h2>\r\n                            <ul className=\"activityList\">\r\n                                <li><Link to={`${this.props.link}1`}>1<br /></Link><span>Distinguishing</span></li>\r\n                                <li><Link to={`${this.props.link}2`}>2<br /></Link><span>Identifying</span></li>\r\n                                <li><Link to={`${this.props.link}3`}>3<br /></Link><span>Mimicking</span></li>\r\n                                <li><Link to={`${this.props.link}4`}>4<br /></Link><span>Producing</span></li>\r\n                            </ul>\r\n                        </div>\r\n                    </>\r\n                }\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonDirectoryCard;","import React, { Component } from 'react';\r\nimport LessonDirectoryCard from '../components/LessonDirectoryCard';\r\n// import {\r\n//     BrowserRouter as Router,\r\n//     Switch,\r\n//     Route,\r\n//     Link\r\n//   } from \"react-router-dom\";\r\n// import Hexagon from '../components/Hexagon';\r\n\r\nclass LessonDirectory extends Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            allLessons: []\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        fetch('/api/lessons/all')\r\n            .then( (response) => response.json()\r\n                .then( (result) => {\r\n                    this.setState({allLessons: result});\r\n                }));\r\n        // console.log(`State: ${this.state.allLessons}`);\r\n\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <ul>\r\n                    {this.state.allLessons.map( (lesson) => {\r\n                        return <LessonDirectoryCard LessonName={lesson.name} LessonDesc={lesson.description} is_quiz={lesson.is_quiz} link={`/lessons/${lesson.name}/`} key={`${lesson._id}`} />\r\n                    })}\r\n                </ul>\r\n                \r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonDirectory;","import React, {Component} from 'react';\r\nimport One from '../assets/images/1_graph.svg';\r\nimport Two from '../assets/images/2_graph.svg';\r\nimport Three from '../assets/images/3_graph.svg';\r\nimport Four from '../assets/images/4_graph.svg';\r\n\r\n\r\nclass Answer extends Component{\r\n\r\n    chooseImage(){\r\n        switch(this.props.number){\r\n            case '1':\r\n                // return(<img src={require('../assets/images/1_graph.svg')} alt=\"tone 1\" title=\"1\" />);\r\n                return One;\r\n            case '2':\r\n                return Two;\r\n            case '3':\r\n                return Three;\r\n            case '4':\r\n                return Four;\r\n            default:\r\n                return('Something went wrong');\r\n        }\r\n    }\r\n\r\n    // chooseImage(){\r\n    //     var url =\"\";\r\n    //     switch(this.props.number){\r\n    //         case '1':\r\n    //             url=\"\"\r\n    //     }\r\n    // }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            {this.props.number && \r\n                <div id={this.props.number} onClick={e => this.props.collectResponse(e)} className=\"response\" style={{backgroundImage: `url(${this.chooseImage()})`}}>\r\n                    <span className =\"background-image\" role=\"img\" aria-label={this.props.number}></span>\r\n                    {/* {this.chooseImage()} */}\r\n                    {/* <p className=\"answer-text\">{this.props.number[0]}</p> */}\r\n                </div>\r\n                // :\r\n                // <p>Something went wrong</p>\r\n            }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Answer;","import React, { Component } from 'react';\r\n\r\n\r\nclass FeedbackBox extends Component{\r\nrender(){\r\n    return(\r\n        <div id =\"feedback-box\" className={`feedbackBox ${this.props.status}`}>\r\n            <> \r\n                <h3>{this.props.heading}</h3>\r\n                <p>{this.props.content}</p>\r\n            </>\r\n                \r\n\r\n        </div>\r\n    )\r\n}\r\n\r\n}\r\n\r\nexport default FeedbackBox;","import React, {Component} from 'react';\r\nimport Answer from './Answer';\r\nimport FeedbackBox from './FeedbackBox';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass ChoiceQuiz extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            currentStimulus: 0,\r\n            options:[], \r\n            active:\"\",\r\n            submitted: false,\r\n            answers:[],\r\n            score:0,\r\n            status:\"\",\r\n            error:\"\",\r\n            feedback_heading:\"\",\r\n            feedback:\"\"\r\n        };\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.collectResponse = this.collectResponse.bind(this);\r\n        this.nextQuestion = this.nextQuestion.bind(this);\r\n        this.reset = this.reset.bind(this);\r\n        // this.componentDidMount  = this.componentDidMount.bind(this);\r\n        this.chooseTones  = this.chooseTones.bind(this);\r\n        this.randomize = this.randomize.bind(this);\r\n        this.displayAnswers = this.displayAnswers.bind(this);\r\n        this.reportScore = this.reportScore.bind(this);\r\n    }\r\n\r\n\r\n\r\n    // static getStateDerivedFromProps(props, state){\r\n    //     return {stimuli: props.stimuli};\r\n    // }\r\n    reset(){\r\n        document.getElementById(\"nextQuestion\").classList.add(\"hide\");\r\n        document.getElementById(\"submitAnswer\").classList.remove(\"hide\");\r\n        document.getElementById(\"feedback-box\").style.visibility=\"hidden\";\r\n\r\n\r\n        var responses = document.getElementsByClassName(\"response\");\r\n        for (var x=0; x<responses.length; x++){\r\n            responses[x].classList.remove(\"active\");\r\n            responses[x].classList.remove(\"correct\");\r\n            responses[x].classList.remove(\"incorrect\");\r\n        }\r\n        this.setState({'submitted':false});\r\n        this.setState({'options':[]});\r\n        this.setState({'active':\"\"});\r\n    }\r\n\r\n\r\n    handleClick() {\r\n        this.setState({'currentStimulus': this.state.currentStimulus + 1});\r\n        this.reset();\r\n    }\r\n\r\n    handleSubmit(event){\r\n        if(this.state.active !==\"\"){\r\n            this.setState({'submitted':true});\r\n            var responses = document.getElementsByClassName(\"response\");\r\n            for (var x=0; x<responses.length; x++){\r\n                responses[x].classList.remove(\"active\");\r\n            }\r\n    \r\n            if(this.state.active===JSON.stringify(this.props.stimuli[this.state.currentStimulus].correctTone)){\r\n                document.getElementById(this.state.active).classList.add('positive');\r\n                this.setState({'score':this.state.score+1});\r\n                this.setState({'status':\"positive\"});\r\n                this.setState({feedback_heading: 'Correct!'});\r\n                this.setState({'feedback':`You selected tone ${this.state.active}, which is the correct answer.`});\r\n            } else{\r\n                document.getElementById(this.state.active).classList.add('negative');\r\n                this.setState({'status':\"negative\"});\r\n                this.setState({feedback_heading: 'Incorrect.'});\r\n                this.setState({'feedback':`You selected tone ${this.state.active}, when it should've been tone ${this.props.stimuli[this.state.currentStimulus].correctTone}.`});\r\n\r\n            }\r\n    \r\n            document.getElementById(\"nextQuestion\").classList.remove(\"hide\");\r\n            document.getElementById(\"submitAnswer\").classList.add(\"hide\");\r\n            document.getElementById(\"feedback-box\").style.visibility=\"visible\";\r\n            this.setState({'error':\"\"});\r\n        }else{\r\n            this.setState({'error':\"Please select an option.\"});\r\n        }\r\n        \r\n    }\r\n\r\n    collectResponse(event){\r\n        if(this.state.submitted===false){\r\n            const questionLabel = `question${this.state.currentStimulus}`;\r\n            this.setState({'answers':[questionLabel, event.target.id ]});\r\n            this.setState({'active': event.target.id});\r\n            var responses = document.getElementsByClassName(\"response\");\r\n            for (var x=0; x<responses.length; x++){\r\n                responses[x].classList.remove(\"active\");\r\n            }\r\n            event.target.classList.add(\"active\");\r\n        }\r\n    }\r\n\r\n    randomize(a){\r\n        var j, x, i;\r\n        for (i = a.length - 1; i > 0; i--) {\r\n            j = Math.floor(Math.random() * (i + 1));\r\n            x = a[i];\r\n            a[i] = a[j];\r\n            a[j] = x;\r\n        }\r\n        return a;\r\n    }\r\n\r\n    chooseTones(correct){\r\n\r\n        var optionArr =[];\r\n        var randomArr = [1,2,3,4];\r\n        //to pair words with tones under their graphs, uncomment word-related code \r\n        // var word = [];\r\n        \r\n        //Two choice quiz needs randomized \r\n        if(this.props.choices==='2'){\r\n            //randomize the alternate tones \r\n            randomArr = this.randomize(randomArr);\r\n        \r\n            for (var i=0; i<randomArr.length; i++){\r\n                if (randomArr[i] === correct){\r\n                    // word.push(randomArr[i]);\r\n                    // word.push(randomArr[i].charAt(randomArr[i].length-1));\r\n                    optionArr.push(randomArr[i]);\r\n                    randomArr.splice(i, 1); \r\n                    // word = [];\r\n                }\r\n            }\r\n            optionArr.push(randomArr[0]);\r\n\r\n            //Push the first entry in the randomized array, whatever it is\r\n            //this assumes the randomized array only holds incorrect options\r\n            // word.push(randomArr[0]);\r\n            // word.push(randomArr[0].charAt(randomArr[0].length-1));\r\n            // optionArr.push(word);\r\n            // word = [];\r\n\r\n            // //Push the correct answer to the array\r\n            // word.push(this.props.stimuli[this.state.currentStimulus].word);\r\n            // word.push(JSON.stringify(this.props.stimuli[this.state.currentStimulus].correctTone));\r\n            // optionArr.push(word);\r\n            // word = [];\r\n\r\n            // //randomize the two options\r\n            // optionArr = this.randomize(optionArr);\r\n\r\n            // if(stimuli[this.state.currentStimulus]){\r\n            //     word.push(stimuli[this.state.currentStimulus].word);\r\n            //     optionArr.push(word);\r\n            //     word=[];\r\n            //     for (var i=0; i<2; i++){\r\n            //         word.push(stimuli[this.state.currentStimulus].alternateTones[i]);\r\n            //         optionArr.push(word);\r\n            //         word=[];\r\n            //     }\r\n            //     // this.setState({'options': optionArr});\r\n            //     // console.log('in random' + stimuli[this.state.currentStimulus].word);\r\n\r\n            // }``\r\n        } else {\r\n            optionArr = randomArr;\r\n        }\r\n        \r\n        if(this.state.options === undefined || this.state.options.length<1){\r\n            this.setState({'options': optionArr});\r\n        }\r\n    }\r\n\r\n    displayAnswers(correct){\r\n        this.chooseTones(correct);\r\n        const answers = this.state.options.map( (opt) =>\r\n            <Answer number = {JSON.stringify(opt)} key ={opt} collectResponse={this.collectResponse} />\r\n        );\r\n        return (<>{answers}</>);\r\n    }\r\n\r\n    // if you need to get it from the end of the pinyin\r\n    // getNumber(word){\r\n    //     var number = word.charAt(word.length-1);\r\n    //     return number;\r\n    // }\r\n \r\n    reportScore(){\r\n        this.props.reportScore(this.state.score, this.props.stimuli.length, this.props.choices);\r\n    }\r\n    \r\n\r\n    nextQuestion(){\r\n        this.refs.audio.pause();\r\n        this.refs.audio.load();\r\n        this.handleClick();\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.props.stimuli && \r\n                    <>\r\n                    { this.props.stimuli.length > this.state.currentStimulus ? \r\n                    <>\r\n                    <div className=\"activity-wrap two-choice\">\r\n                        <div className=\"stimuli\">\r\n                            <audio controls id = \"audio-clip\" ref=\"audio\" >\r\n                                <source id=\"audioSource\" src={`/${this.props.stimuli[this.state.currentStimulus].audioFile}`} type=\"audio/mpeg\" />\r\n                                Audio not working!\r\n                            </audio>\r\n                            <p>word:  {this.props.stimuli[this.state.currentStimulus].character}</p>\r\n                        \r\n                        </div>\r\n                        <div className = \"answers\">\r\n                            {this.displayAnswers(this.props.stimuli[this.state.currentStimulus].correctTone)}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"feedbackContainer\">\r\n                        <button onClick={this.handleSubmit} id=\"submitAnswer\">Submit</button>\r\n                        <button onClick={this.nextQuestion} className=\"hide\" id=\"nextQuestion\">Next</button>\r\n                        <FeedbackBox status = {this.state.status} heading={this.state.feedback_heading} content={this.state.feedback}/>\r\n                        <p id=\"error\">{this.state.error}</p>\r\n                    </div>\r\n                    </>\r\n                    \r\n                    :\r\n                        <>\r\n                        {this.props.quiz===\"true\" ?\r\n                            <>\r\n                            <p>You've completed this section of the quiz.</p>\r\n                            <button onClick={this.reportScore}>Continue</button>\r\n                            </>\r\n                        :\r\n                        <div id=\"score\">\r\n                            <h2>Activity complete!</h2>\r\n                            <p>Your score is: {this.state.score} out of {this.props.stimuli.length}</p>\r\n                            <Link to=\"../\">Return to Lessons & Quizzes</Link>\r\n                            {this.props.choices==='2' ? <Link to=\"./2\"><button>Next activity</button></Link>\r\n                            :\r\n                            <Link to=\"./3\"><button>Next activity</button></Link>\r\n                            }\r\n                        </div>\r\n                        }\r\n                        </>\r\n                    }\r\n                </>\r\n            }\r\n        </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default ChoiceQuiz;","import React, { Component } from 'react';\r\nimport * as d3 from 'd3'\r\n\r\nclass PitchChart extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.drawPitchChart = this.drawPitchChart.bind(this);\r\n        this.drawPitchCurve = this.drawPitchCurve.bind(this);\r\n    }\r\n    \r\n    drawPitchChart(divID, width, height) {\r\n        d3.select(`#${divID}`)\r\n            .append('svg')\r\n            .attr('width', width)\r\n            .attr('height', height)\r\n            .style('background', '#eeeeee')\r\n            .style('border','3px solid #9A2D04');\r\n        var y = 2;\r\n        var i;\r\n        for (i = 0; i < 5; i++) {\r\n            d3.select(`#${divID} svg`)\r\n                .append('line')\r\n                .attr('x1', 0)\r\n                .attr('y1', y)\r\n                .attr('x2', width)\r\n                .attr('y2', y)\r\n                .style('stroke', '#babbbc')\r\n                .style('stroke-width', '3px');\r\n            if (i === 3) {\r\n                y -= 4;\r\n            }\r\n            y += (height / 4);\r\n        }\r\n    }\r\n    \r\n    drawPitchCurve(dataset, width, height, {baseline=(height/2), standardDeviation=0, color=\"red\", chartID=\"__visualization\"} = {}) {\r\n        let datarecord = [];\r\n        const parsedData = d3.tsvParse(dataset);\r\n        parsedData.map((__data) => {\r\n            // let zScore = stats.calcZScore(baseline,data.frequency,standardDeviation);    \r\n            // if(isNaN(zScore)){\r\n            // \tzScore = 0;\r\n            // }\r\n            let point = {time: __data.time, frequency: __data.frequency};\r\n            datarecord.push(point);\r\n            // var zScore = 0;\r\n            var x = __data.time * (width / 2);\r\n            var y = height - ((height/2) + ((__data.frequency - (height/2))));\r\n            return d3.select(`#${chartID} svg`)\r\n                .append(\"circle\")\r\n                .attr(\"cx\", x)\r\n                .attr(\"cy\", y) \r\n                .attr(\"r\", 5)\r\n                .classed(\"userPitch\",true)\r\n                .style(\"fill\",color);\r\n            }\r\n        );\r\n    };\r\n\r\n    componentDidMount(){\r\n        this.drawPitchChart('__visualization', 1100, 500);\r\n        this.props.dataset.map( (curve) => {\r\n            return this.drawPitchCurve(curve[0], 1100, 500, {color:curve[1]});\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        console.log('PitchChartUpdate');\r\n        d3.selectAll(\"svg\").remove();\r\n        this.drawPitchChart('__visualization', 1100, 500);\r\n        this.props.dataset.map( (curve) => {\r\n            return this.drawPitchCurve(curve[0], 1100, 500, {color:curve[1]});\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                <div id=\"__visualization\"> \r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default PitchChart;","import React, { Component } from 'react';\r\n\r\nclass AudioPlayer extends Component {\r\n\r\n    render(){\r\n        return(\r\n            <audio className=\"stimuliAudio\" controls > \r\n                <source src={this.props.audioFile} />\r\n                The audio cannot play.\r\n            </audio>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AudioPlayer;","import React, { Component } from 'react'\r\nimport Recorder from './Recorder';\r\nimport PitchChart from './PitchChart';\r\nimport AudioPlayer from './AudioPlayer';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass Mimicking extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            record: [],\r\n            userDataset: '',\r\n            currentStimuli: 0,\r\n            allowAdvance: false\r\n        }\r\n        this.passDataToState = this.passDataToState.bind(this);\r\n        this.nextWord = this.nextWord.bind(this);\r\n    }\r\n\r\n    async uploadRecording(dataset, username){\r\n        const response = await(await fetch('/api/recordings/add/', {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({dataset: dataset})\r\n        })).json();\r\n        console.dir(response);\r\n        const recordingID = response.recording;\r\n        const updatedRecord = [\r\n            ...this.state.record,\r\n            recordingID\r\n        ];\r\n        this.setState({record: updatedRecord});\r\n    }\r\n\r\n    passDataToState(dataset){\r\n        this.setState({\r\n            userDataset: dataset,\r\n            allowAdvance: true\r\n        });\r\n    }\r\n\r\n    nextWord(){\r\n        if(this.state.allowAdvance){\r\n            this.setState({\r\n                currentStimuli: this.state.currentStimuli + 1,\r\n                userDataset: '',\r\n                allowAdvance: false\r\n            });\r\n            if(this.props.lesson.is_quiz){\r\n                this.uploadRecording(this.state.userDataset);\r\n                this.props.recordingOutput('activity3', this.state.record);\r\n            }\r\n        } else {\r\n            console.log('Please complete the recording first!');\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.props.lesson && this.props.lesson.words && this.props.lesson.words[this.state.currentStimuli] ?\r\n                    <>\r\n                        <p className=\"stimuliCharacter\">{this.props.lesson.words[this.state.currentStimuli].character}</p>\r\n\r\n                        <AudioPlayer audioFile={`/${this.props.lesson.words[this.state.currentStimuli].audioFile}`} />\r\n                        {this.props.lesson.words[this.state.currentStimuli].native_recording && \r\n                            <PitchChart dataset={[[String(this.props.lesson.words[this.state.currentStimuli].native_recording.data), 'blue'],[String(this.state.userDataset), 'red']]} />\r\n                        }\r\n                        <Recorder label=\"Record\" outputFunction={this.passDataToState} key={Math.random()} />\r\n                        <button onClick={this.nextWord}>Next {this.props.lesson.words.length - 1 === this.state.currentStimuli ?\r\n                            \"Section\"\r\n                            :\r\n                            \"Word\"\r\n                        }</button>\r\n                    </>\r\n                    :\r\n                    <>\r\n                    {this.props.quiz===\"true\" ?\r\n                            <>\r\n                                <p>You've completed this section of the quiz.</p>\r\n                                <button onClick={this.props.advance(3)}>Continue</button>\r\n                            </>\r\n                        :\r\n                            <div id=\"score\">\r\n                                <h2>Activity complete!</h2>\r\n                                <Link to=\"../\">Return to Lessons & Quizzes</Link>\r\n                                <Link to=\"./4\"><button>Next activity</button></Link>\r\n                            </div>\r\n                    }\r\n                    </>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Mimicking;","import React, { Component } from 'react'\r\nimport Recorder from './Recorder';\r\nimport PitchChart from './PitchChart';\r\nimport AudioPlayer from './AudioPlayer';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\nclass Production extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            record: [],\r\n            userDataset: '',\r\n            currentStimuli: 0,\r\n            allowAdvance: false\r\n        }\r\n        this.passDataToState = this.passDataToState.bind(this);\r\n        this.nextWord = this.nextWord.bind(this);\r\n    }\r\n\r\n    async uploadRecording(dataset, username){\r\n        const response = await(await fetch('/api/recordings/add/', {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({dataset: dataset})\r\n        })).json();\r\n        console.dir(response);\r\n        const recordingID = response.recording;\r\n        const updatedRecord = [\r\n            ...this.state.record,\r\n            recordingID\r\n        ];\r\n        this.setState({record: updatedRecord});\r\n    }\r\n\r\n    passDataToState(dataset){\r\n        this.setState({\r\n            userDataset: dataset,\r\n            allowAdvance: true\r\n        });\r\n        if(this.props.lesson.is_quiz){\r\n            this.uploadRecording(dataset, this.props.username);\r\n        }\r\n    }\r\n\r\n    nextWord(){\r\n        if(this.state.allowAdvance){\r\n            this.setState({\r\n                currentStimuli: this.state.currentStimuli + 1,\r\n                userDataset: '',\r\n                allowAdvance: false\r\n            });\r\n            if(this.props.lesson.is_quiz){\r\n                this.uploadRecording(this.state.userDataset);\r\n                this.props.recordingOutput('activity4', this.state.record);\r\n            }\r\n        } else {\r\n            console.log('Please complete the recording first!');\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.props.lesson && this.props.lesson.words && this.props.lesson.words[this.state.currentStimuli] ?\r\n                    <>\r\n                        <p className=\"stimuliCharacter\">{this.props.lesson.words[this.state.currentStimuli].character}</p>\r\n\r\n                        {this.state.allowAdvance ?\r\n                            <AudioPlayer audioFile={`/${this.props.lesson.words[this.state.currentStimuli].audioFile}`} />\r\n                        :\r\n                            <></>\r\n                        }\r\n                        <PitchChart \r\n                            dataset={this.state.allowAdvance ? [\r\n                                [String(this.props.lesson.words[this.state.currentStimuli].native_recording.data), 'blue'],\r\n                                [String(this.state.userDataset), 'red']\r\n                            ]\r\n                            :\r\n                            [\r\n                                [String(this.state.userDataset), 'red']\r\n                            ]\r\n                        }\r\n                        />\r\n                        <Recorder label=\"Record\" outputFunction={this.passDataToState} />\r\n                        <button onClick={this.nextWord}>Next {this.props.lesson.words.length - 1 === this.state.currentStimuli ?\r\n                            \"Section\"\r\n                            :\r\n                            \"Word\"\r\n                        }</button>\r\n                    </>\r\n                    :\r\n                    <>\r\n                    {this.props.quiz===\"true\" ?\r\n                            <>\r\n                                <p>You've completed this section of the quiz.</p>\r\n                                <button onClick={this.props.advance(4)}>Continue</button>\r\n                            </>\r\n                        :\r\n                            <div id=\"score\">\r\n                                <h2>Activity complete!</h2>\r\n                                <Link to=\"../\">Return to Lessons & Quizzes</Link>\r\n                            </div>\r\n                    }\r\n                    </>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Production;","import React, {Component} from 'react';\r\nimport ChoiceQuiz from './ChoiceQuiz';\r\nimport Mimicking from './Mimicking';\r\nimport Production from './Production';\r\n\r\nclass Quiz extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        console.log(props);\r\n        this.state = {\r\n            activity1:{\r\n                score: null,\r\n                maxpoints: 0\r\n            },\r\n            activity2:{\r\n                score: null,\r\n                maxpoints: 0\r\n            },\r\n            activity3:{\r\n                recordings:[]\r\n            },\r\n            activity4:{\r\n                recordings:[]\r\n            },\r\n            current: null,\r\n            // current:0,\r\n            prev: false,\r\n            sum_score: 0,\r\n            sum_total_score: 0\r\n        }\r\n        this.captureScore = this.captureScore.bind(this);\r\n        this.advance = this.advance.bind(this);\r\n        this.recordScore = this.recordScore.bind(this);\r\n        this.initialize= this.initialize.bind(this);\r\n        this.addActivityRecording = this.addActivityRecording.bind(this);\r\n        this.componentDidUpdate = this.componentDidUpdate.bind(this);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState, snapshot){\r\n        if(this.props.activities){\r\n            if(this.state.current===null){\r\n                this.setState({current:this.props.activities[0]});\r\n            }\r\n        }\r\n        if(prevState.prev === false){\r\n            console.log('prev state is false')\r\n            const response = await fetch(`/api/quizScores/me/${this.props.lesson.name}`);\r\n            const result = await response.json();\r\n            if(result.length >0){\r\n                this.setState({prev: true});\r\n                console.log('state set');\r\n            }\r\n            console.log('Intialization completed');\r\n            return <></>;\r\n        }\r\n    }\r\n\r\n    async initialize(){\r\n        if(this.props.activities){\r\n            if(this.state.current===null){\r\n                this.setState({current:this.props.activities[0]});\r\n            }\r\n        }\r\n        const response = await fetch(`/api/quizScores/me/${this.props.lesson}`);\r\n        const result = await response.json();\r\n        if(result.length >0){\r\n            this.setState({prev: true});\r\n            console.log('state set');\r\n        }\r\n        console.log('Intialization completed');\r\n        return <></>;\r\n    }\r\n\r\n    addActivityRecording(activityNumber, recordings){\r\n        this.setState({[activityNumber]: {\r\n            recordings: recordings\r\n        }});\r\n    }\r\n\r\n    async recordScore(){\r\n        var sum_score = null;\r\n        var sum_total_score = null;\r\n        if(this.includes(1) && this.includes(2)){\r\n            sum_score = this.state.activity1.score + this.state.activity2.score;\r\n            sum_total_score = this.state.activity1.max_score + this.state.activity2.max_score;\r\n        } else if(this.includes(1)){\r\n            sum_score = this.state.activity1.score;\r\n            sum_total_score = this.state.activity1.max_score;\r\n        } else if (this.includes(2)){\r\n            sum_score = this.state.activity2.score;\r\n            sum_total_score = this.state.activity2.max_score;\r\n        }\r\n        this.setState({sum_score:sum_score});\r\n        this.setState({sum_total_score:sum_total_score});\r\n        var array1 = this.state.activity3.recordings;\r\n        var allRecordings = array1.concat(this.state.activity4.recordings);\r\n        this.props.sendScore(sum_score, sum_total_score, allRecordings);        \r\n    }\r\n\r\n    advance(num){\r\n        for (var i=num; i<5; i++){\r\n            var next=i+1;\r\n            if (this.includes(next)){\r\n                this.setState({\"current\":next});\r\n                break;\r\n            }else if (next===5){\r\n                this.setState({\"current\":5});\r\n                this.recordScore();\r\n            }\r\n        }\r\n    }\r\n\r\n    captureScore(score, max_score, choices){\r\n        const activity = choices===\"2\" ? \"activity1\" : \"activity2\";\r\n        const activitynum = choices===\"2\" ? 1 : 2;\r\n        this.setState({[activity]:{\r\n            \"score\": score, \r\n            \"max_score\": max_score\r\n        }}, () => {\r\n            this.advance(activitynum);\r\n        });\r\n    }\r\n\r\n    includes(num){\r\n        for(var i=0; i<this.props.activities.length; i++){\r\n            if(this.props.activities[i]===num){\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    toPercent(num1,num2){\r\n        var percent= num1/num2 *100;\r\n        return percent;\r\n    }\r\n    //to-do\r\n    //need to lift state up from quizzes to here; when a quiz is finished, score needs to come up, and current needs to be updated to the next activity in this.props.activities (might not be the next sequentially)\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {/* {this.props.fullLesson && } */}\r\n                {this.state.prev===true && this.state.current !== 5? \r\n                    <>\r\n                        <h3>You've already taken this quiz.</h3>\r\n                        <p>You cannot take a quiz you've already taken. For more practice, explore the lessons. For re-takes, please speak with your teacher.</p>\r\n                    </>\r\n                    :\r\n                    <>\r\n                    {this.props.activities && this.includes(1) && this.state.current===1 ?\r\n                        <ChoiceQuiz stimuli={this.props.stimuli} choices=\"2\" reportScore={this.captureScore} quiz=\"true\"/>\r\n                        :\r\n                        \"\"\r\n                    }\r\n                    {this.props.activities && this.includes(2)  && this.state.current===2 ?\r\n                        <ChoiceQuiz stimuli={this.props.stimuli} choices=\"4\" reportScore={this.captureScore} quiz=\"true\"/>\r\n                        :\r\n                        \"\"\r\n                    }\r\n                    {this.props.activities && this.includes(3)  && this.state.current===3 ?\r\n                        <Mimicking lesson={this.props.lesson} username={this.props.username} recordingOutput={this.addActivityRecording} advance = {this.advance} quiz=\"true\"/>\r\n                        :\r\n                        \"\"\r\n                    }\r\n                    {this.props.activities && this.includes(4)  && this.state.current===4 ?\r\n                        <Production lesson={this.props.lesson} username={this.props.username} recordingOutput={this.addActivityRecording} advance = {this.advance} quiz=\"true\"/>\r\n                        :\r\n                        \"\"\r\n                    }\r\n                    {this.props.activities  && this.state.current===5 ?\r\n                        <div id=\"score\">\r\n                        <h3>You've completed this quiz!</h3>\r\n                        <p>Your combined score on the multiple choice sections is <br/>{this.state.sum_score} out of {this.state.sum_total_score} ({this.toPercent(this.state.sum_score, this.state.sum_total_score)}%). <br />Your teacher will grade your recordings.</p>\r\n                        </div>\r\n                        :\r\n                        \"\"\r\n                    }\r\n                    </>\r\n                }\r\n                \r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Quiz;","import React, {Component} from 'react';\r\nimport ChoiceQuiz from '../components/ChoiceQuiz';\r\nimport Baseline from '../components/Baseline';\r\nimport Quiz from '../components/Quiz';\r\nimport Mimicking from '../components/Mimicking';\r\nimport Production from '../components/Production';\r\nimport {\r\n    Route,\r\n  } from \"react-router-dom\";\r\n\r\n\r\nclass Activity extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            lesson: {}, \r\n            audioRes: [],\r\n            audios:[],\r\n            audioParse: [],\r\n            userScores:[]\r\n        }\r\n        this.sendScore = this.sendScore.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try{\r\n            const lesson = await (await fetch(`/api/lessons/${this.props.match.params.name}`)).json()\r\n            this.setState({lesson});\r\n        } catch (ex) {\r\n            console.log(ex);\r\n        }\r\n    }\r\n\r\n    sendScore(score, sum_total, recordings){\r\n        fetch('/api/quizScores/add/', {\r\n            method: 'POST',\r\n            headers: {\"Content-Type\":\"application/json\"},\r\n            \r\n            body:JSON.stringify({\r\n                \"lesson\": this.props.match.params.name,\r\n                \"user\": this.props.user,\r\n                \"score\": score,\r\n                \"maxScore\": sum_total,\r\n                \"recordings\": recordings || ''\r\n            })\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h3>Lesson: {this.props.match.params.name}</h3>\r\n                <h2>Activity {this.props.match.params.activityNumber}</h2>\r\n               \r\n                <Route path={`/lessons/${this.props.match.params.name}/1`}>\r\n                    <ChoiceQuiz stimuli={this.state.lesson.words} choices=\"2\" />\r\n \r\n                </Route>\r\n                <Route path={`/lessons/${this.props.match.params.name}/2`}>\r\n                    <ChoiceQuiz stimuli={this.state.lesson.words} choices=\"4\"/>\r\n                </Route>\r\n                <Route path={`/lessons/${this.props.match.params.name}/3`}>\r\n                    {Boolean(this.props.baseline) === false ?\r\n                        <Baseline outputFunction={this.props.setBaseline} />\r\n                    :\r\n                        <Mimicking lesson={this.state.lesson} />\r\n                    }\r\n                </Route>\r\n                <Route path={`/lessons/${this.props.match.params.name}/4`}>\r\n                    {Boolean(this.props.baseline) === false ?\r\n                        <Baseline outputFunction={this.props.setBaseline} />\r\n                    :\r\n                        <Production lesson={this.state.lesson} />\r\n                    }\r\n                </Route>\r\n                <Route path={`/lessons/${this.props.match.params.name}/quiz`}>\r\n                    <Quiz activities={this.state.lesson.quizSections} stimuli={this.state.lesson.words} lesson={this.state.lesson} username={this.props.user} sendScore={this.sendScore}/>\r\n                </Route>\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Activity;","import React, { Component } from 'react';\r\n\r\nclass AudioUpload extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            word: '',\r\n            alternateTones: [],\r\n            correct: '',\r\n            lessonName: '' \r\n        }\r\n\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.createAlternateToneArray = this.createAlternateToneArray.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleInputChange(event){\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        const name = target.name;\r\n\r\n        this.setState({\r\n            [name]:value\r\n        })\r\n    }\r\n\r\n    createAlternateToneArray(){\r\n        const altTone1 = document.getElementById(\"altTone1\").value; \r\n        const altTone2 = document.getElementById(\"altTone2\").value; \r\n        const altTone3 = document.getElementById(\"altTone3\").value; \r\n        this.setState({\r\n            alternateTones: [altTone1, altTone2, altTone3]\r\n        })\r\n    }\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        let formData = new FormData();\r\n        formData.append('word', this.state.word);\r\n        formData.append('alternateTones', this.state.alternateTones);\r\n        formData.append('correct', this.state.correct);\r\n        formData.append('lessonName', this.state.lessonName);\r\n        formData.append('audioFile', document.getElementById(\"audioFileInput\").files[0])\r\n        fetch(\"/api/uploadAudio/\", {\r\n            method: \"POST\",\r\n            body: formData,\r\n        }).then((response) => {\r\n            console.log(response)\r\n            });\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <>\r\n                <form onSubmit={this.handleSubmit} className =\"audioForm\">\r\n                    <label for=\"audioFileInput\">\r\n                       Audio File:\r\n                    </label>\r\n                    <input \r\n                            id=\"audioFileInput\"\r\n                            type=\"file\" \r\n                            name=\"audioFile\"\r\n                        />\r\n                    <label for =\"word\">\r\n                        Word:\r\n                    </label>\r\n                    <input \r\n                            id=\"word\"\r\n                            type=\"text\" \r\n                            name=\"word\"\r\n                            value={this.state.word}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    <label for=\"tone\">\r\n                        Correct Tone:\r\n                    </label>\r\n                    <input \r\n                            id=\"tone\"\r\n                            type=\"text\"\r\n                            name=\"correct\"\r\n                            value={this.state.correct}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    <label for=\"altTone1\">\r\n                        Alternate Tone 1:\r\n                    </label>\r\n                        <input\r\n                            id=\"altTone1\"\r\n                            type=\"text\"\r\n                            name=\"altTone1\"\r\n                            value={this.state.alternateTones[0]}\r\n                            onChange={this.createAlternateToneArray}\r\n                        />\r\n                    <label for=\"altTone2\">\r\n                        Alternate Tone 2:\r\n                    </label>\r\n                        <input\r\n                            id=\"altTone2\"\r\n                            type=\"text\"\r\n                            name=\"altTone2\"\r\n                            value={this.state.alternateTones[1]}\r\n                            onChange={this.createAlternateToneArray}\r\n                        />\r\n                    <label for=\"altTone3\">\r\n                        Alternate Tone 3:\r\n                    </label>\r\n                        <input\r\n                            id=\"altTone3\"\r\n                            type=\"text\"\r\n                            name=\"altTone3\"\r\n                            value={this.state.alternateTones[2]}\r\n                            onChange={this.createAlternateToneArray}\r\n                        />\r\n                    <label for=\"lesson\">\r\n                        Lesson Name:\r\n                    </label>\r\n                    <input\r\n                            id=\"lesson\"\r\n                            type=\"text\"\r\n                            name=\"lessonName\"\r\n                            value={this.state.lessonName}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                    <label id=\"submitButton\">\r\n                        <input\r\n                            type=\"submit\"\r\n                            value=\"Submit\"\r\n                        />\r\n                    </label>\r\n\r\n                </form>\r\n\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default AudioUpload;","import React, { Component } from \"react\";\r\nimport {Redirect} from 'react-router-dom';\r\n\r\nclass LessonForm extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        // console.log(`some words! ${props.words}`)\r\n        // var startingWords;\r\n        // startingWords = props.words.map((word) => {\r\n        //     console.log(word.character);\r\n        //     return word.character;\r\n        // });\r\n        this.state = {\r\n            name: props.name || '',\r\n            description: props.description || '',\r\n            words: props.words || [],\r\n            wordKeys: [],\r\n            is_quiz: props.is_quiz || false,\r\n            quiz_sections: props.quiz_sections || [1,2,3,4],\r\n            all_words: [],\r\n            form_complete: false\r\n        }\r\n        console.log(props);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleCheckboxChange = this.handleCheckboxChange.bind(this);\r\n        this.fetchAllWords = this.fetchAllWords.bind(this);\r\n        this.handleSelectChange = this.handleSelectChange.bind(this);\r\n        this.matchWord = this.matchWord.bind(this);\r\n        this.componentDidUpdate = this.componentDidUpdate.bind(this);\r\n        this.deleteLesson = this.deleteLesson.bind(this);\r\n        this.is_checked = this.is_checked.bind(this);\r\n        this.handleSectionChange = this.handleSectionChange.bind(this);\r\n    }\r\n\r\n    async componentDidMount(){\r\n        const all_words = await this.fetchAllWords();\r\n        // const {name, description, words, is_quiz, editing} = this.props;\r\n        this.setState({all_words});\r\n        // this.setState({name, description, words, is_quiz, editing});\r\n        // this.setState({name});\r\n    }\r\n\r\n    async fetchAllWords(){\r\n        const all_words = await (await fetch('/api/words/all/')).json();\r\n        return all_words;\r\n    }\r\n\r\n    handleInputChange(event){\r\n        var attribute = event.target.name;\r\n        var value = event.target.value;\r\n        this.setState({[attribute]: value})\r\n    }\r\n\r\n    handleCheckboxChange(){\r\n        var prevState = this.state.is_quiz;\r\n        this.setState({is_quiz: !prevState})\r\n    }\r\n\r\n    handleSectionChange(num){\r\n        console.log(this.state.quiz_sections);\r\n        var array = this.state.quiz_sections; \r\n        var index = null;\r\n        if(this.is_checked(num)){\r\n            index = array.indexOf(num); \r\n            // delete array[index];\r\n            array.splice(index,1);\r\n        }else{\r\n            array.push(num);\r\n        }\r\n\r\n\r\n        this.setState({quiz_sections:array});\r\n        \r\n\r\n    }\r\n\r\n    handleSelectChange(event){\r\n        const options = event.target.options;\r\n        var selected = [];\r\n        var selected_keys = [];\r\n        for(let i = 0; i < options.length; i++){\r\n            if(options[i].selected){\r\n                selected.push(options[i].value);\r\n                selected_keys.push(options[i].id);\r\n            }\r\n        }\r\n        this.setState({words:selected});\r\n        this.setState({wordKeys:selected_keys});\r\n    }\r\n\r\n    deleteLesson(){\r\n        const method = 'DELETE';\r\n        const url = `/api/lessons/${this.props.name}/delete`;\r\n\r\n        fetch(url,{\r\n            method: method,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                name: this.state.name\r\n            })\r\n        }).then( () => {\r\n            console.log(\"deleted\");\r\n        });\r\n\r\n    }\r\n\r\n    handleSubmit(event){\r\n        console.log(\"in handle\");\r\n        event.preventDefault();\r\n        var method = this.props.editing ? 'PUT' : 'POST';\r\n        var url = '/api/lessons/add/';\r\n        if(this.props.editing && this.state.name ===this.props.name){\r\n            url = `/api/lessons/${this.state.name}/edit`;\r\n        } else if (this.props.editing && this.state.name !== this.props.name){\r\n            this.deleteLesson();\r\n            method = \"POST\";\r\n        }\r\n        console.log(url);\r\n        fetch(url,{\r\n            method: method,\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                name: this.state.name,\r\n                description: this.state.description,\r\n                words: this.state.wordKeys,\r\n                is_quiz: this.state.is_quiz,\r\n                quizSections: this.state.quiz_sections\r\n            })\r\n        }).then( () => {\r\n            console.log(\"success\");\r\n            this.setState({form_complete: true})\r\n        });\r\n    }\r\n\r\n    componentDidUpdate(prevProps){\r\n        if(prevProps.words !== this.props.words){\r\n            const newWords = this.props.words.map( (word) => {\r\n                return word.character;\r\n            })\r\n            this.setState({words:newWords});\r\n        }\r\n    }\r\n\r\n    matchWord(word){\r\n        for(var i=0; i<this.state.words.length; i++){\r\n            if (this.state.words[i]._id===word){\r\n                console.log(true);\r\n                return true;\r\n                \r\n            }else{\r\n                console.log(false);\r\n                return false;\r\n                \r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    is_checked(num){\r\n        if(this.props.quiz_sections || this.state.quiz_sections){\r\n            for (var i=0; i<this.state.quiz_sections.length; i++){\r\n                if(this.state.quiz_sections[i]===num){\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.state.form_complete ?\r\n                    <Redirect to='/teacherInterface/' />\r\n                :\r\n                    <>\r\n                        {this.props.editing ?\r\n                         <h1>Editing {this.props.name}</h1>\r\n                        :\r\n                         <h1>New lesson</h1>}\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <label htmlFor=\"name\">\r\n                                Name:\r\n                            </label>\r\n                                <input \r\n                                    id=\"name\"\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    value={this.state.name}\r\n                                    onChange={this.handleInputChange}\r\n                                />\r\n                            <label htmlFor=\"description\">\r\n                                Description:\r\n                            </label>\r\n                                <input \r\n                                    id=\"description\"\r\n                                    type=\"text\"\r\n                                    name=\"description\"\r\n                                    value={this.state.description}\r\n                                    onChange={this.handleInputChange}\r\n                                />\r\n                            <label htmlFor=\"words\">\r\n                                Words\r\n                            </label>\r\n                                <select\r\n                                    id=\"words\"\r\n                                    multiple={true}\r\n                                    name=\"words\"\r\n                                    value={this.state.words}\r\n                                    onChange={this.handleSelectChange}\r\n                                    size=\"7\"\r\n                                >\r\n                                    {this.state.all_words && this.state.all_words.map( (word) => {\r\n                                        return <option  key={word._id} id={word._id} value={word.character}>{word.character}</option>\r\n                                    })}\r\n                                \r\n                                </select>\r\n                            <label htmlFor=\"is_quiz\">\r\n                                Is this lesson a quiz?:\r\n                            </label>\r\n                            <input \r\n                                    id=\"is_quiz\"\r\n                                    checked={!!this.state.is_quiz}\r\n                                    type=\"checkbox\"\r\n                                    name=\"is_quiz\"\r\n                                    value={this.state.is_quiz}\r\n                                    onChange={this.handleCheckboxChange}\r\n                            />\r\n                            {this.state.is_quiz ? \r\n                                <>\r\n                                    <h3>Which activities would you like in this quiz?</h3>\r\n                                    <label htmlFor=\"sec_one\">Activity 1: Distinguishing (2-choice quiz)</label>\r\n                                    <input \r\n                                        id=\"sec_one\"\r\n                                        checked={this.is_checked(1)}\r\n                                        type=\"checkbox\"\r\n                                        name=\"sec_one\"\r\n                                        value=\"1\"\r\n                                        onClick={() => this.handleSectionChange(1)}\r\n                                    />\r\n                                    <label htmlFor=\"sec_two\">Activity 2: Identifying (4-choice quiz)</label>\r\n                                    <input \r\n                                        id=\"sec_two\"\r\n                                        checked={this.is_checked(2)}\r\n                                        type=\"checkbox\"\r\n                                        name=\"sec_two\"\r\n                                        value=\"2\"\r\n                                        onChange={() => this.handleSectionChange(2)}\r\n                                    />\r\n                                    <label htmlFor=\"sec_three\">Activity 3: Mimicking (record with teacher example)</label>\r\n                                    <input \r\n                                        id=\"sec_three\"\r\n                                        checked={this.is_checked(3)}\r\n                                        type=\"checkbox\"\r\n                                        name=\"sec_three\"\r\n                                        value=\"3\"\r\n                                        onChange={() => this.handleSectionChange(3)}\r\n                                    />\r\n                                    <label htmlFor=\"sec_four\">Activity 4: Producing (record without teacher example)</label>\r\n                                    <input \r\n                                        id=\"sec_four\"\r\n                                        checked={this.is_checked(4)}\r\n                                        type=\"checkbox\"\r\n                                        name=\"sec_four\"\r\n                                        value=\"4\"\r\n                                        onChange={() => this.handleSectionChange(4)}\r\n                                    />\r\n\r\n                                </>\r\n                                :\r\n                                <>\r\n                                </>\r\n                            }\r\n                            <input type=\"submit\" value=\"Submit\" />\r\n                        </form>\r\n                    </>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonForm;","import React, { Component } from \"react\";\r\nimport LessonForm from './LessonForm';\r\n\r\nclass LessonEdit extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            lesson: {},\r\n            words: []\r\n        }\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    async componentDidMount(){\r\n        const lesson = await (await fetch(`/api/lessons/${this.props.match.params.name}/`)).json();\r\n        this.setState({lesson});\r\n\r\n        const words = await(await fetch(`/api/lessons/${this.props.match.params.name}/words/`)).json();\r\n        this.setState({words});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            {this.state.lesson.name &&\r\n                <LessonForm name={this.state.lesson.name} \r\n                description={this.state.lesson.description} \r\n                words={this.state.words} \r\n                is_quiz={this.state.lesson.is_quiz} \r\n                editing={true}\r\n                quiz_sections={this.state.lesson.quizSections} />\r\n            }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonEdit;","import React, { Component } from \"react\";\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass LessonDelete extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            deleted:false,\r\n            response: \"\"\r\n        }\r\n        this.delete = this.delete.bind(this);\r\n    }\r\n\r\n    delete(){\r\n        fetch(`/api/lessons/${this.props.match.params.name}/delete`, {method:\"DELETE\"})\r\n            .then( (response) => response.text()\r\n                .then( (result) => {\r\n                    console.log(\"deleted\");\r\n                    this.setState({response: result});\r\n                    this.setState({deleted:true});\r\n                    }\r\n                )\r\n            );\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"lesson delete\"> \r\n                {this.state.deleted ? \r\n                    <>\r\n                    <p>{this.state.response}</p>\r\n                    <Link to=\"../../\">Back to lessons</Link>\r\n                    \r\n                    </>\r\n                :\r\n                    <>\r\n                    <h3>Are you sure you want to delete {this.props.match.params.name}?</h3>\r\n                    <button onClick={this.delete}>Delete</button>\r\n                    </>\r\n                    \r\n                }\r\n                \r\n\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonDelete;\r\n","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport '../../css/teacherInterface.css';\r\nimport '../../css/lessons.css';\r\n\r\nclass TeacherLessonDirectory extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            lessons: []\r\n        }\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n    }\r\n\r\n    async componentDidMount(){\r\n        var lessons = await (await fetch(\"/api/lessons/all/\")).json();\r\n        this.setState({lessons: lessons});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.state.lessons && \r\n                    <>\r\n                        <Link to={'/teacherInterface/lessons/add'} id=\"addLessonLink\">\r\n                            + &emsp;Add a Lesson\r\n                        </Link>\r\n                        <h1>Lessons:</h1>\r\n                        <ul>\r\n                            {this.state.lessons.map( (lesson) => {\r\n                                return <Link to={`/teacherInterface/lessons/${lesson.name}/`} key={lesson.name} props={lesson} className=\"teacherCardLink\">\r\n                                    <div className=\"teacherCard lessonCard\">\r\n                                        <div className=\"meta\" onClick={this.toggleActivityList}>\r\n                                            <h2>{lesson.is_quiz ? 'Quiz: ' : 'Lesson: '}{lesson.name}</h2>\r\n                                            <p>{lesson.description}</p>\r\n                                            <Link to={`/teacherInterface/lessons/${lesson.name}/edit/`} key={lesson.name} className=\"teacherEditLink\">Edit Lesson</Link>\r\n                                            <Link to={`/teacherInterface/lessons/${lesson.name}/delete/`} key={`delete${lesson.name}`} className=\"teacherDeleteLink\">Delete Lesson</Link>\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                                    \r\n                            })}\r\n                        </ul>\r\n                    </>\r\n                }\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TeacherLessonDirectory;","import React, {Component} from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass LessonShow extends Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n            lesson:  {}\r\n        }\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.fetchLesson = this.fetchLesson.bind(this);\r\n    }\r\n\r\n    async componentDidMount() {\r\n        if(!!this.state.lesson){\r\n            this.fetchLesson();\r\n        }\r\n    }\r\n\r\n    async fetchLesson(){\r\n        const lesson = await (await fetch(`/api/lessons/${this.props.match.params.name}`)).json();\r\n        this.setState({lesson});\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className =\"lesson show\">\r\n                <Link to={`/teacherInterface/lessons/${this.state.lesson.name}/edit/`} key={this.state.lesson.name} className=\"teacherEditLink\">Edit Lesson</Link>\r\n                <h2>{this.state.lesson.name}</h2>\r\n                <h3>Description:</h3>\r\n                <p>{this.state.lesson.description}</p>\r\n                {this.state.lesson.words &&\r\n                    <>\r\n                        <h3>Words:</h3>\r\n                        <ul>\r\n                            {this.state.lesson.words.map( (word) => {\r\n                            return <li key={word._id}>{word.character}</li>\r\n                            })}\r\n                        </ul>\r\n                    </>\r\n                }\r\n                {this.state.lesson.is_quiz ? \r\n                    <>\r\n                        <p id=\"is_quiz\">This lesson is a quiz, containing the following activities:</p>\r\n                        <ul>\r\n                            {this.state.lesson.quizSections.map( (activity) => {\r\n                                return <li key={activity}>{activity}</li>\r\n                            })}\r\n                        </ul>\r\n                    </>\r\n                :\r\n                    <p>This is a lesson, not a quiz.</p>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default LessonShow;","import React, { Component } from 'react';\r\nimport AudioUpload from '../components/AudioUpload';\r\n// import TeacherNav from '../components/TeacherNav';\r\nimport LessonForm from '../components/lessons/LessonForm';\r\nimport LessonEdit from '../components/lessons/LessonEdit';\r\nimport LessonDelete from '../components/lessons/LessonDelete';\r\nimport {Switch, Route} from 'react-router-dom';\r\nimport TeacherLessonDirectory from '../components/lessons/TeacherLessonDirectory';\r\nimport LessonShow from '../components/lessons/LessonShow';\r\n\r\nclass TeacherInterface extends Component {\r\n\r\n\r\n    render(){\r\n        return(\r\n            <Switch>\r\n                <Route path=\"/teacherInterface/lessons/:name/edit/\" component={LessonEdit} />\r\n                <Route path=\"/teacherInterface/lessons/:name/delete/\" component={LessonDelete} />\r\n                <Route path=\"/teacherInterface/lessons/add/\" component={LessonForm} />\r\n                <Route path=\"/teacherInterface/lessons/:name/\" component={LessonShow} />\r\n                <Route path=\"/teacherInterface/lessons/\" component={TeacherLessonDirectory} />\r\n                <Route path=\"/teacherInterface/words/add\" component={AudioUpload} />\r\n                <Route path=\"/teacherInterface/\" component={TeacherLessonDirectory} />\r\n            </Switch>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TeacherInterface;","import React, { Component } from 'react';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\n\r\nclass SignUp extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            password2: '',\r\n            baseline: null,\r\n            is_teacher: false,\r\n            form_complete: false,\r\n            preventSubmit:false,\r\n            errorMessage:''\r\n        }\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.handleCheckboxChange = this.handleCheckboxChange.bind(this);\r\n        this.handlePasswordChange = this.handlePasswordChange.bind(this);\r\n    }\r\n\r\n\r\n    handlePasswordChange(){\r\n        // var attribute = event.target.name;\r\n        // var value = event.target.value;\r\n        if(this.state.password !== this.state.password2){\r\n            console.log(\"error\");\r\n            this.setState({\"errorMessage\": \"Your passwords do not match.\"})\r\n            this.setState({\"preventSubmit\": true});\r\n        }else if(this.state.password===this.state.password2){\r\n            console.log(\"match\");\r\n            this.setState({\"errorMessage\": \"\"})\r\n            this.setState({\"preventSubmit\": false});\r\n        }\r\n\r\n        // this.setState({[attribute]: value})\r\n    }\r\n\r\n\r\n    async handleInputChange(event){\r\n        var attribute = event.target.name;\r\n        var value = event.target.value;\r\n        this.setState({[attribute]: value}, () =>{\r\n            if (attribute === \"password\" || attribute ===\"password2\"){\r\n                this.handlePasswordChange();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    handleCheckboxChange(){\r\n        var prevState = this.state.is_teacher;\r\n        this.setState({is_teacher: !prevState})\r\n    }\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        if(this.state.preventSubmit === false){\r\n            const method = this.props.editing ? 'PUT' : 'POST';\r\n            fetch('/api/signup/',{\r\n                method: method,\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({\r\n                    username: this.state.username,\r\n                    password: this.state.password,\r\n                    baseline: this.state.baseline,\r\n                    is_teacher: this.state.is_teacher\r\n                })\r\n            }).then( async (response) => {\r\n                const message = await response.text();\r\n                if (message ===\"Username taken, please try another.\"){\r\n                    this.setState({\"errorMessage\": message})\r\n                }else{\r\n                    this.setState({form_complete: true})\r\n                }\r\n                \r\n            });\r\n        } else if(this.state.preventSubmit===true){\r\n            this.setState({\"errorMessage\": this.state.errorMessage + \"  Please correct errors before submitting.\"})\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n                {this.state.form_complete ?\r\n                    <Redirect to='/' />\r\n                :\r\n                    <>\r\n                    <form id=\"signUp\" onSubmit={this.handleSubmit}>\r\n                        <h2>Sign Up</h2>\r\n                        <label htmlFor=\"username\">Username:</label>\r\n                        <input\r\n                            id=\"username\"\r\n                            type=\"text\"\r\n                            name=\"username\"\r\n                            value={this.state.username}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                        <label htmlFor=\"password\">Password:</label>\r\n                        <input\r\n                            id=\"password\"\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            value={this.state.password}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                        <label htmlFor=\"password2\">Re-enter password:</label>\r\n                        <input\r\n                            id=\"password2\"\r\n                            type=\"password\"\r\n                            name=\"password2\"\r\n                            value={this.state.password2}\r\n                            onChange={this.handleInputChange}\r\n                        />\r\n                        {/* <label htmlFor=\"is_teacher\">Check this box if you are a teacher.</label>\r\n                        <input\r\n                            id=\"is_teacher\"\r\n                            type=\"checkbox\"\r\n                            checked={!!this.state.is_teacher}\r\n                            name=\"is_teacher\"\r\n                            value={this.state.is_teacher}\r\n                            onChange={this.handleCheckboxChange}\r\n                        /> */}\r\n                        <p id=\"error\">{this.state.errorMessage}</p>\r\n                        <input type=\"submit\" value=\"Submit\" />\r\n                        <p>If you are a teacher, please <a href=\"mailto:yinwebapp@gmail.com\">contact us</a> for special permissions.</p>\r\n\r\n                    </form>\r\n                    \r\n                    </>}\r\n                \r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default SignUp;","import React from 'react';\r\nimport './css/activities.css';\r\nimport './css/LADirectoryStyle.css';\r\nimport './css/style.css';\r\nimport './css/lessons.css';\r\nimport BaselineExplanation from './components/BaselineExplanation';\r\nimport Baseline from './components/Baseline';\r\nimport Footer from './components/Footer';\r\nimport Header from './components/Header';\r\nimport Home from './pages/Home';\r\nimport Login from './components/Login';\r\nimport LessonDirectory from './pages/LessonDirectory';\r\nimport Activity from './pages/Activity';\r\nimport TeacherInterface from './pages/TeacherInterface';\r\nimport SignUp from './pages/SignUp';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from \"react-router-dom\";\r\n\r\nclass App extends React.Component{\r\n\r\n  constructor(){\r\n    super();\r\n    this.state={\r\n      \"lessonOpen\":true,\r\n      isLoggedIn: false,\r\n      username: '',\r\n      baseline: 0,\r\n      error:\"\"\r\n    }\r\n    this.toggleLessonActivity = this.toggleLessonActivity.bind(this);\r\n    this.submitForm = this.submitForm.bind(this);\r\n    this.setBaseline = this.setBaseline.bind(this);\r\n    this.checkLogin = this.checkLogin.bind(this);\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.checkLogin()\r\n  }\r\n\r\n  toggleLessonActivity(){\r\n    this.setState({lessonOpen: !this.state.lessonOpen});\r\n  }\r\n\r\n  async setBaseline(value){\r\n    this.setState({baseline: value});\r\n    await fetch('/api/user/baseline/add/', {\r\n      method: 'POST',\r\n      headers: {\r\n          'Content-Type': 'application/json'\r\n      },\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        baseline: value\r\n      })\r\n    });\r\n  }\r\n\r\n  async checkLogin(){\r\n    const session = await fetch('/api/user/me/');\r\n    if(session.status === 401 || session.status === 404){\r\n      return false;\r\n    } else {\r\n      const isLoggedIn = true;\r\n      // const baselineResponse = await fetch('/api/user/me/');\r\n      const userdata = await session.json();\r\n      if(userdata){\r\n        console.log(userdata.username);\r\n        console.log(userdata);\r\n      }\r\n      const is_teacher = userdata.is_teacher;\r\n      const username = userdata.username\r\n      const baseline = Number(userdata.baseline);\r\n      this.setState({username, isLoggedIn, baseline, is_teacher});\r\n    }\r\n  }\r\n\r\n  submitForm(event, username, password) {\r\n        event.preventDefault();\r\n        fetch('/api/login/', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            credentials: 'include',\r\n            body: JSON.stringify(\r\n                {\r\n                    \"username\":username,\r\n                    \"password\":password\r\n                }\r\n            )\r\n        }).then( (response) => {\r\n            if (response.status ===401){\r\n              this.setState({error:\"Username or password is incorrect.\"});\r\n            }else{\r\n              response.text().then( (token) => {\r\n                this.setState({error:\"\"});\r\n                this.setState( {isLoggedIn: true});\r\n                this.setState( {username: username});\r\n              })\r\n            }\r\n          })\r\n        \r\n    }\r\n\r\n  render(){\r\n    return (\r\n      <Router>\r\n      <Header is_teacher={true} />\r\n      \r\n        {this.state.isLoggedIn ? \r\n          <> \r\n            <Switch>\r\n              <Route path=\"/baseline/\" component={Baseline} />\r\n              <Route path=\"/teacherInterface/\" component={TeacherInterface} />\r\n              <Route path=\"/lessons/:name/:activityNumber\" render={(props) => <Activity baseline={this.state.baseline} {...props} setBaseline={this.setBaseline} user={this.state.username} />} />\r\n              {/* <Route path=\"/lessons/:name/\" component={LessonShow} /> */}\r\n              <Route path=\"/lessons/\" component={LessonDirectory} />\r\n              <Route path=\"/\" component={Home} />\r\n            </Switch>\r\n          </>\r\n        : \r\n          <>\r\n              <Switch>\r\n                <Route exact path=\"/\" component={Home} />\r\n                <Route exact path=\"/SignUp\">\r\n                  <SignUp />\r\n                </Route>\r\n                <Route exact path=\"*/explanation\">\r\n                  <BaselineExplanation/>\r\n                </Route>\r\n                <Route exact path=\"/*\">\r\n                  <Login submitForm={this.submitForm} error={this.state.error}/>\r\n                </Route>\r\n              </Switch>\r\n            </>\r\n          }\r\n        <Footer />\r\n      </Router>\r\n    );\r\n  }\r\n}\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}